{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/ingredients-group/ingredients-group.module.css","components/ingredient-constructor/ingredient-constructor.module.css","components/footer-constructor/footer-constructor.module.css","pages/orders-feed.module.css","utils/cookies.ts","utils/api.ts","utils/constants.ts","utils/tokens.ts","services/actions/auth.ts","middleware/socket-middleware.ts","services/actions/feed.ts","services/actions/history.ts","services/actions/burger-ingredients.ts","services/reducers/burger-ingredients.ts","services/actions/burger-constructor.ts","services/reducers/burger-constructor.ts","services/reducers/auth.ts","services/reducers/feed.ts","services/reducers/history.ts","services/reducers/index.ts","services/store.ts","utils/hooks.ts","images/logo.svg","components/app-header/app-header.tsx","components/loading/loading.tsx","pages/login.tsx","pages/register.tsx","pages/restore-password.tsx","pages/save-new-password.tsx","components/protected-route.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/ingredient-card/ingredient-card.tsx","utils/get-ingredients-sum.ts","utils/get-format-date .ts","components/order-card/order-card.tsx","pages/orders-history.tsx","components/order-page/order-page.tsx","utils/get-ingredients-count.ts","pages/history-page.tsx","pages/profile.tsx","layouts/profile-layout.jsx","components/public-route.tsx","pages/not-found-404.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient/ingredient.tsx","components/ingredients-group/ingredients-group.tsx","components/burger-ingredients/burger-ingredients.tsx","components/order-details/order-details.tsx","components/ingredient-constructor/ingredient-constructor.tsx","components/footer-constructor/footer-constructor.tsx","components/burger-constructor/burger-constructor.tsx","pages/constructor.tsx","layouts/constructor-layout.jsx","pages/orders-feed.tsx","pages/feed-page.tsx","layouts/feed-layout.jsx","components/app/app.tsx","reportWebVitals.ts","index.tsx","components/app-header/app-header.module.css","components/order-page/order-page.module.css","layouts/profile-layout.module.css","pages/profile.module.css","components/burger-constructor/burger-constructor.module.css","components/order-card/order-card.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/ingredient/ingredient.module.css","components/loading/loading.module.css","components/modal/modal.module.css","components/ingredient-card/ingredient-card.module.css","components/order-details/order-details.module.css","pages/constructor.module.css","pages/login.module.css","pages/orders-history.module.css","pages/not-found-404.module.css"],"names":["module","exports","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","RequestMethod","BASE_URL","INGREDIENTS_TYPES","SORTED_INGREDIENTS_TYPES","INGREDIENTS_TYPES_NAME","TYPES_DND","ORDER_DETAILS","STATUS_TYPES","STATUS_TYPES_NAME","saveTokens","authToken","refreshToken","accessToken","localStorage","setItem","indexOf","split","path","deleteTokens","removeItem","SET_AUTH_LOADING","SET_AUTH_ERROR","SET_USER","SET_MESSAGE","CLEAR_USER","RESPONSED_EMAIL","setAuthLoading","type","setAuthError","payload","setUser","setMessage","clearUser","responsedEmail","request","url","a","body","method","get","headers","defaultHeaders","authorization","fetch","JSON","stringify","response","json","data","isShoudBeAuthorized","status","message","isJwtExperied","Api","updateAccessToken","success","getIngredients","createOrder","idIngredients","post","ingredients","order","register","form","login","user","token","getItem","store","dispatch","logout","restorePassword","email","setPassword","getUser","updateUser","patch","socketMiddleware","wsUrl","wsActions","socket","next","action","wsInit","onOpen","onClose","onError","onMessage","wsSendMessage","WebSocket","onopen","event","onerror","onmessage","parse","then","onclose","send","WS_FEED_CONNECTION_START","WS_FEED_CONNECTION_SUCCESS","WS_FEED_CONNECTION_ERROR","WS_FEED_CONNECTION_CLOSED","WS_FEED_GET_MESSAGE","SET_CURRENT_NUMBER","setCurrentNumber","WS_HISTORY_CONNECTION_START","WS_HISTORY_CONNECTION_SUCCESS","WS_HISTORY_CONNECTION_CLOSED","WS_HISTORY_CONNECTION_ERROR","WS_HISTORY_GET_MESSAGE","SET_INGREDIENTS_LOADING","SET_INGREDIENTS_SUCCESS","SET_INGREDIENTS_ERROR","INCREASE_COUNT","DECREASE_COUNT","CLEAR_COUNTS","setError","initialState","isLoading","error","SET_CONSTRUCTOR_LOADING","SET_CONSTRUCTOR_ERROR","SET_SELECTED_INGREDIENT","REMOVE_CONSTRUCTOR_INGREDIENT","CLEAR_CONSTRURTOR","SORT_INGREDIENTS","SET_ORDER","REMOVE_ORDER","setConstructorError","selectedIngredients","selectedBun","bunsSum","ingredientsSum","orderNumber","isAuth","isResponsedEmail","orders","total","totalToday","currentNumber","rootReducer","combineReducers","state","map","ing","_id","id","count","Number","price","filter","idx","sortIngredients","dragIndex","hoverIndex","splice","dragIngredient","number","auth","feed","String","history","wsFeed","wsHistory","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","useDispatch","dispatchHook","useSelector","selectorHook","AppHeader","className","styles","root","header","mobile_header","src","logo","alt","leftBlock","exact","to","link","activeClassName","active","Loading","image_wrapper","image","Login","useState","password","setForm","onChange","e","target","handleSubmit","useCallback","preventDefault","loginRequest","onSubmit","field","size","text","Register","registerRequest","placeholder","RestorePassword","setEmail","restorePasswordRequest","pathname","title","SaveNewPassword","useEffect","setNewPassword","icon","ProtectedRoute","children","rest","render","from","location","ModalOverlay","handleESCclose","code","addEventListener","removeEventListener","wrapper","onClick","Modal","portalDiv","getElementById","createPortal","closeButton","IngredientCard","zIndex","card_wrapper","style","getIngredientsSum","ingredientsAll","selectedIds","result","forEach","getFormatDate","date","Intl","DateTimeFormat","timeZoneName","hour","minute","format","OrderCard","useMemo","createdAt","ingredientsIds","sumOrder","formatedDate","images","unshift","includes","push","handlelClick","card","info","bottom_block","section","img","i","length","OrdersHistory","useHistory","cards","OrderPage","find","updatedAt","selectedIng","ingredientCountsById","Object","keys","getIngredientsCount","list_items","item","HistoryPage","useParams","Profile","isVisibleButtons","updateUserRequest","buttonUndo","buttonBlock","ProfileLayout","useLocation","isShowModal","onClickCloseButton","go","buttonLogout","navBarLinks","nav","button","PublicRoute","NotFound404","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","Ingredient","addIngredientMobile","useDrag","collect","monitor","opacity","isDragging","dragRef","stopPropagation","handlelClickAdd","ref","currency","button_add","IngredientsGroup","observer","onClickIngredient","refElement","setRef","observe","unobserve","content","BurgerIngredients","currentTab","setCurrentTab","filterIngredients","groupedIngredients","openIngredientModal","addIngredient","console","log","scrollToTab","tab","scrollIntoView","behavior","useRef","current","IntersectionObserver","entry","isIntersecting","nextSibling","nextTab","threshold","disconnect","navbar","container","wrapper_section","footer","OrderDetails","checkMarkIcon","button_block","IngredientConstructor","removeIngredient","moveIngredient","end","didDrop","useDrop","accept","canDrop","hover","dropRef","element","node","thumbnail","handleClose","FooterConstructor","sum","handleClick","BurgerConstructor","setIngredient","increaseCount","decreaseCount","closeConstructorModal","ids","drop","isHover","isOver","locked_block","isLocked","wrapper_elements","Constructor","DndProvider","backend","HTML5Backend","ConstructorLayout","OrdersFeed","readyOrders","prepareOrders","statistic","top_block","block_ready","numbers_status","number_ready","FeedPage","FeedLayout","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Router","HashRouter","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.e4dcbd2f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"modal-overlay_wrapper__26t8D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredients-group_content__2LMGa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"element\":\"ingredient-constructor_element__3gqUY\",\"void\":\"ingredient-constructor_void__3MEKc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"footer-constructor_section__1bPUg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"orders-feed_cards__4rgtl\",\"root\":\"orders-feed_root__PrkoB\",\"wrapper\":\"orders-feed_wrapper__1I3KW\",\"statistic\":\"orders-feed_statistic__3zk10\",\"top_block\":\"orders-feed_top_block__3H_M4\",\"status\":\"orders-feed_status__TA-XS\",\"block_ready\":\"orders-feed_block_ready__1kB72\",\"numbers_status\":\"orders-feed_numbers_status__21MCg\",\"number_ready\":\"orders-feed_number_ready__Tf9gg\",\"error\":\"orders-feed_error__3s0Cr\"};","export function getCookie(name: string): string | undefined {\r\n   const matches = document.cookie.match(\r\n      new RegExp('(?:^|; )' + name.replace(/([$?*|{}\\]\\\\^])/g, '\\\\$1') + '=([^;]*)')\r\n   )\r\n   return matches ? decodeURIComponent(matches[1]) : undefined\r\n}\r\n\r\nexport function setCookie(\r\n   name: string,\r\n   value: string,\r\n   props: Record<string, any> & { expires?: number | Date | string } = {}\r\n) {\r\n   props = props || {}\r\n   let exp = props.expires\r\n   if (typeof exp == 'number' && exp) {\r\n      const d = new Date()\r\n      d.setTime(d.getTime() + exp * 1000)\r\n      exp = props.expires = d\r\n   }\r\n   if (exp && (exp as Date).toUTCString) {\r\n      props.expires = (exp as Date).toUTCString()\r\n   }\r\n   value = encodeURIComponent(value)\r\n   let updatedCookie = name + '=' + value\r\n   for (const propName in props) {\r\n      updatedCookie += '; ' + propName\r\n      const propValue = props[propName]\r\n      if (propValue !== true) {\r\n         updatedCookie += '=' + propValue\r\n      }\r\n   }\r\n   document.cookie = updatedCookie\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n   setCookie(name, ' ', { expires: -1 })\r\n}\r\n","import { BASE_URL } from \"./constants\"\r\nimport { store } from '../services/store'\r\nimport { getCookie } from './cookies'\r\nimport { saveTokens, deleteTokens } from './tokens'\r\nimport { TIngredient, TForm, TSetOrder, TTokens, TUser, TResetPasswordResponse } from './../types/data';\r\nimport { clearUser } from \"../services/actions/auth\"\r\n\r\ntype THeaders = Record<string, string>\r\n\r\ntype TResponseBody<TDataType = {}> = TDataType & {\r\n   success: boolean;\r\n};\r\n\r\nenum RequestMethod {\r\n   get = 'GET',\r\n   post = 'POST',\r\n   patch = 'PATCH',\r\n   delete = 'DELETE',\r\n}\r\n\r\ntype TRequestBody<TBody> = Partial<{\r\n   body: TBody,\r\n   method: RequestMethod,\r\n   headers: THeaders\r\n}>\r\nconst request = async <TData = {}, TBody = unknown>(url: string, { body, method = RequestMethod.get, headers = {} }: TRequestBody<TBody> = {}): Promise<TResponseBody<TData>> => {\r\n   const defaultHeaders: THeaders = {\r\n      'Content-Type': 'application/json',\r\n   }\r\n\r\n   const accessToken = getCookie('accessToken')\r\n   if (accessToken) {\r\n      defaultHeaders.authorization = `Bearer ${accessToken}`\r\n   }\r\n\r\n   const response = await fetch(`${BASE_URL}${url}`, {\r\n      method,\r\n      headers: {\r\n         ...defaultHeaders,\r\n         ...headers\r\n      },\r\n      body: JSON.stringify(body),\r\n   })\r\n\r\n   const data = await response.json()\r\n\r\n   const isShoudBeAuthorized = response.status === 401 && data.message === \"You should be authorised\";\r\n   // const isTokenExperied = response.status === 401 && data.message === \"Token is invalid\";\r\n   const isJwtExperied = response.status === 403 && data.message === \"jwt expired\";\r\n   if (isShoudBeAuthorized || isJwtExperied) {\r\n      const data = await Api.updateAccessToken()\r\n\r\n      if (data.success) {\r\n         return request(url, { body, method, headers })\r\n      }\r\n   }\r\n\r\n   if (!data.success) {\r\n      throw data\r\n   }\r\n\r\n   return data\r\n}\r\n\r\nexport const Api = {\r\n   getIngredients: async () => {\r\n      const { data } = await request<{ data: Array<TIngredient> }>(`/ingredients`)\r\n      return data\r\n   },\r\n   createOrder: async (idIngredients: string[]) => {\r\n      const { order } = await request<{ order: TSetOrder }>(`/orders`, {\r\n         method: RequestMethod.post,\r\n         body: { ingredients: idIngredients },\r\n      })\r\n\r\n      return order\r\n   },\r\n\r\n   register: async (form: TForm) => {\r\n      const { refreshToken, accessToken, ...data } = await request<TTokens & TUser>(`/auth/register`, {\r\n         method: RequestMethod.post,\r\n         body: form,\r\n      })\r\n\r\n      saveTokens({ refreshToken, accessToken })\r\n      return data\r\n   },\r\n\r\n   login: async (form: TForm) => {\r\n      const { refreshToken, accessToken, user } = await request<TTokens & { user: TUser }>(`/auth/login`, {\r\n         method: RequestMethod.post,\r\n         body: form,\r\n      })\r\n      saveTokens({ refreshToken, accessToken })\r\n      return user\r\n   },\r\n\r\n   updateAccessToken: async () => {\r\n      const data = await request<TTokens & TResetPasswordResponse>(`/auth/token`, {\r\n         method: RequestMethod.post,\r\n         body: {\r\n            token: localStorage.getItem('refreshToken')\r\n         },\r\n      })\r\n\r\n      if (!data.success) {\r\n         store.dispatch(clearUser())\r\n      }\r\n\r\n      saveTokens(data)\r\n      return data\r\n   },\r\n\r\n   logout: async () => {\r\n      const data = await request(`/auth/logout`, {\r\n         method: RequestMethod.post,\r\n         body: {\r\n            token: localStorage.getItem('refreshToken')\r\n         },\r\n      })\r\n      deleteTokens()\r\n      return data\r\n   },\r\n\r\n   restorePassword: async (email: string) => {\r\n      return await request<TResetPasswordResponse>(`/password-reset`, {\r\n         method: RequestMethod.post,\r\n         body: {\r\n            email\r\n         },\r\n      })\r\n   },\r\n\r\n   setPassword: async (form: TForm) => {\r\n      return await request<TResetPasswordResponse>(`/password-reset/reset`, {\r\n         method: RequestMethod.post,\r\n         body: form,\r\n      })\r\n   },\r\n\r\n   getUser: async () => {\r\n      const { user } = await request<{ user: TUser }>(`/auth/user`)\r\n\r\n      return user\r\n   },\r\n\r\n   updateUser: async (form: TForm) => {\r\n      const { user } = await request<{ user: TUser }>(`/auth/user`, {\r\n         method: RequestMethod.patch,\r\n         body: form,\r\n      })\r\n\r\n      return user\r\n   }\r\n}\r\n","export const BASE_URL = \"https://norma.nomoreparties.space/api\"\r\n\r\nexport const INGREDIENTS_TYPES = {\r\n   bun: 'bun',\r\n   sauce: 'sauce',\r\n   main: 'main',\r\n}\r\nexport const SORTED_INGREDIENTS_TYPES = [\r\n   INGREDIENTS_TYPES.bun,\r\n   INGREDIENTS_TYPES.sauce,\r\n   INGREDIENTS_TYPES.main\r\n]\r\nexport const INGREDIENTS_TYPES_NAME = {\r\n   [INGREDIENTS_TYPES.bun]: \"Булки\",\r\n   [INGREDIENTS_TYPES.sauce]: \"Соусы\",\r\n   [INGREDIENTS_TYPES.main]: \"Начинки\",\r\n}\r\nexport const TYPES_DND = {\r\n   ingredients: \"ingredients\",\r\n   items: \"items\",\r\n}\r\nexport const ORDER_DETAILS = {\r\n   info: \"Ваш заказ начали готовить\",\r\n   text: \" Дождитесь готовности на орбитальной станции\"\r\n}\r\nexport const STATUS_TYPES = {\r\n   created: 'created',\r\n   pending: 'pending',\r\n   done: 'done',\r\n}\r\nexport const STATUS_TYPES_NAME = {\r\n   [STATUS_TYPES.created]: \"Создан\",\r\n   [STATUS_TYPES.pending]: \"Готовится\",\r\n   [STATUS_TYPES.done]: \"Выполнен\",\r\n}\r\n","import { deleteCookie, setCookie } from './cookies'\r\n\r\nexport const saveTokens = ({ refreshToken = '', accessToken = '' } = {}) => {\r\n   localStorage.setItem('refreshToken', refreshToken)\r\n   let authToken\r\n   if (accessToken.indexOf('Bearer') === 0) {\r\n      authToken = accessToken.split('Bearer ')[1]\r\n   }\r\n   if (authToken) {\r\n      setCookie('accessToken', authToken, { expires: 20 * 60, path: '/' })\r\n   }\r\n}\r\n\r\nexport const deleteTokens = () => {\r\n   deleteCookie('accessToken')\r\n   localStorage.removeItem('refreshToken')\r\n}","import { TError } from './../../types/data';\r\nimport { TAuthState } from './../reducers/auth';\r\nimport { Api } from '../../utils/api'\r\nimport { AppDispatch, AppThunk } from '../../types';\r\n\r\nexport const SET_AUTH_LOADING = 'SET_AUTH_LOADING'\r\nexport const SET_AUTH_ERROR = 'SET_AUTH_ERROR'\r\nexport const SET_USER = 'SET_USER'\r\nexport const SET_MESSAGE = 'SET_MESSAGE'\r\nexport const CLEAR_USER = 'CLEAR_USER'\r\nexport const RESPONSED_EMAIL = 'RESPONSED_EMAIL'\r\n\r\nexport type TAuthActions = ReturnType<typeof setAuthLoading>\r\n   | ReturnType<typeof setAuthError>\r\n   | ReturnType<typeof setUser>\r\n   | ReturnType<typeof setMessage>\r\n   | ReturnType<typeof clearUser>\r\n   | ReturnType<typeof responsedEmail>\r\n\r\nexport const setAuthLoading = () => ({ type: SET_AUTH_LOADING } as const)\r\nexport const setAuthError = (payload: TError) => ({ type: SET_AUTH_ERROR, payload } as const)\r\nexport const setUser = (payload: Pick<TAuthState, 'name' | 'email'>) => ({ type: SET_USER, payload } as const)\r\nexport const setMessage = (payload: Pick<TAuthState, 'message'>) => ({ type: SET_MESSAGE, payload } as const)\r\nexport const clearUser = () => ({ type: CLEAR_USER } as const)\r\nexport const responsedEmail = (payload: boolean) => ({ type: RESPONSED_EMAIL, payload } as const)\r\n\r\nexport const registerRequest: AppThunk = (form) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.register(form)\r\n      dispatch(setUser(data))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const loginRequest: AppThunk = (form) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.login(form)\r\n      dispatch(setUser(data))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const logoutRequest: AppThunk = () => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      await Api.logout()\r\n      dispatch(clearUser())\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const restorePasswordRequest: AppThunk = (email) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.restorePassword(email)\r\n      dispatch(setMessage(data))\r\n      dispatch(responsedEmail(true))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const setNewPassword: AppThunk = (form) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.setPassword(form)\r\n      dispatch(setMessage(data))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const getUserRequest: AppThunk = () => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.getUser()\r\n      dispatch(setUser(data))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}\r\nexport const updateUserRequest: AppThunk = (form) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setAuthLoading())\r\n      const data = await Api.updateUser(form)\r\n      dispatch(setUser(data))\r\n   } catch (error) {\r\n      dispatch(setAuthError(error as TError))\r\n   }\r\n}","import { AnyAction, Dispatch, MiddlewareAPI, Middleware } from \"redux\"\r\nimport { getCookie } from \"../utils/cookies\"\r\nimport { Api } from \"../utils/api\"\r\n\r\nexport type WSMiddlewareActions = {\r\n   wsInit: string;\r\n   onOpen: string;\r\n   onClose: string;\r\n   onError: string;\r\n   onMessage: string;\r\n   wsSendMessage: string;\r\n}\r\n\r\nexport const socketMiddleware = <TActions extends WSMiddlewareActions>(wsUrl: string, wsActions: TActions): Middleware => {\r\n   return ({ dispatch }: MiddlewareAPI) => {\r\n      let socket: WebSocket | null = null\r\n\r\n      return (next: Dispatch<AnyAction>) => (action: AnyAction) => {\r\n         const { type, payload } = action\r\n         const { wsInit, onOpen, onClose, onError, onMessage, wsSendMessage } = wsActions\r\n\r\n         if (type === wsInit) {\r\n            let url = wsUrl\r\n            const accessToken = getCookie('accessToken')\r\n            if (accessToken) {\r\n               url = `${url}?token=${accessToken}`\r\n            }\r\n            socket = new WebSocket(url)\r\n         }\r\n\r\n         if (socket) {\r\n            socket.onopen = (event: Event) => {\r\n               dispatch({ type: onOpen, payload: event })\r\n            }\r\n\r\n            socket.onerror = (event: Event) => {\r\n               dispatch({ type: onError, payload: event })\r\n            }\r\n\r\n            socket.onmessage = (event: MessageEvent) => {\r\n               const { data } = event\r\n               const { success, ...payload } = JSON.parse(data)\r\n\r\n               if (!success && payload.message === 'Invalid or missing token') {\r\n                  Api.updateAccessToken().then(() => {\r\n                     dispatch({ type: wsInit })\r\n                  })\r\n               }\r\n\r\n               dispatch({ type: onMessage, payload })\r\n            }\r\n\r\n            socket.onclose = (event: CloseEvent) => {\r\n               dispatch({ type: onClose, payload: event })\r\n            }\r\n         }\r\n\r\n         if (type === wsSendMessage) {\r\n            const message = { ...payload }\r\n            socket?.send(JSON.stringify(message))\r\n         }\r\n\r\n         next(action)\r\n      }\r\n   }\r\n}\r\n","import { TFeedState } from '../reducers/feed';\r\nimport { TError } from './../../types/data';\r\nexport const WS_FEED_CONNECTION_START = 'WS_FEED_CONNECTION_START'\r\nexport const WS_FEED_CONNECTION_SUCCESS = 'WS_FEED_CONNECTION_SUCCESS'\r\nexport const WS_FEED_CONNECTION_ERROR = 'WS_FEED_CONNECTION_ERROR'\r\nexport const WS_FEED_CONNECTION_CLOSED = 'WS_FEED_CONNECTION_CLOSED'\r\nexport const WS_FEED_GET_MESSAGE = 'WS_FEED_GET_MESSAGE'\r\nexport const WS_FEED_SEND_MESSAGE = 'WS_FEED_SEND_MESSAGE'\r\nexport const SET_CURRENT_NUMBER = 'SET_CURRENT_NUMBER'\r\n\r\nexport type TFeedActions = ReturnType<typeof wsFeedStart>\r\n   | ReturnType<typeof wsFeedConnectionSuccess>\r\n   | ReturnType<typeof wsFeedGetMessage>\r\n   | ReturnType<typeof wsFeedConnectionClosed>\r\n   | ReturnType<typeof wsFeedConnectionError>\r\n   | ReturnType<typeof setCurrentNumber>\r\n\r\nexport const wsFeedStart = () => ({ type: WS_FEED_CONNECTION_START } as const)\r\nexport const wsFeedConnectionSuccess = () => ({ type: WS_FEED_CONNECTION_SUCCESS } as const)\r\nexport const wsFeedConnectionError = (payload: TError) => ({ type: WS_FEED_CONNECTION_ERROR, payload } as const)\r\nexport const wsFeedConnectionClosed = () => ({ type: WS_FEED_CONNECTION_CLOSED } as const)\r\nexport const wsFeedGetMessage = (payload: Pick<TFeedState, 'orders' | 'totalToday' | 'total'>) => ({\r\n   type: WS_FEED_GET_MESSAGE, payload\r\n} as const)\r\nexport const setCurrentNumber = (payload: number) => ({ type: SET_CURRENT_NUMBER, payload } as const)","import { THistoryState } from './../reducers/history';\r\nimport { TError } from \"../../types/data\"\r\n\r\nexport const WS_HISTORY_CONNECTION_START = 'WS_HISTORY_CONNECTION_START'\r\nexport const WS_HISTORY_CONNECTION_SUCCESS = 'WS_HISTORY_CONNECTION_SUCCESS'\r\nexport const WS_HISTORY_CONNECTION_CLOSED = 'WS_HISTORY_CONNECTION_CLOSED'\r\nexport const WS_HISTORY_CONNECTION_ERROR = 'WS_HISTORY_CONNECTION_ERROR'\r\nexport const WS_HISTORY_GET_MESSAGE = 'WS_HISTORY_GET_MESSAGE'\r\nexport const WS_HISTORY_SEND_MESSAGE = 'WS_HISTORY_SEND_MESSAGE'\r\n\r\nexport type THistoryActions = ReturnType<typeof wsHistoryStart>\r\n   | ReturnType<typeof wsConnectionSuccess>\r\n   | ReturnType<typeof wsGetMessage>\r\n   | ReturnType<typeof wsConnectionClosed>\r\n   | ReturnType<typeof wsConnectionError>\r\n\r\nexport const wsHistoryStart = () => ({ type: WS_HISTORY_CONNECTION_START } as const)\r\nexport const wsConnectionSuccess = () => ({ type: WS_HISTORY_CONNECTION_SUCCESS } as const)\r\nexport const wsGetMessage = (payload: Pick<THistoryState, 'orders'>) => ({ type: WS_HISTORY_GET_MESSAGE, payload } as const)\r\nexport const wsConnectionClosed = () => ({ type: WS_HISTORY_CONNECTION_CLOSED } as const)\r\nexport const wsConnectionError = (payload: TError) => ({ type: WS_HISTORY_CONNECTION_ERROR, payload } as const)","import { TIngredient, TError } from './../../types/data';\r\nimport { AppDispatch, AppThunk } from '../../types'\r\nimport { Api } from '../../utils/api'\r\n\r\nexport const SET_INGREDIENTS_LOADING = 'SET_INGREDIENTSS_LOADING'\r\nexport const SET_INGREDIENTS_SUCCESS = 'SET_INGREDIENTS_SUCCESS'\r\nexport const SET_INGREDIENTS_ERROR = 'SET_INGREDIENTS_ERROR'\r\nexport const INCREASE_COUNT = 'INCREASE_COUNT'\r\nexport const DECREASE_COUNT = 'DECREASE_COUNT'\r\nexport const CLEAR_COUNTS = 'CLEAR_COUNTS'\r\n\r\ntype TincreaseCount = {\r\n  id: TIngredient[\"_id\"],\r\n  type: TIngredient[\"type\"]\r\n}\r\n\r\nexport type TIngredientsActions = ReturnType<typeof setLoading>\r\n  | ReturnType<typeof setError>\r\n  | ReturnType<typeof setIngredients>\r\n  | ReturnType<typeof increaseCount>\r\n  | ReturnType<typeof decreaseCount>\r\n  | ReturnType<typeof clearCounts>\r\n\r\nexport const setLoading = () => ({ type: SET_INGREDIENTS_LOADING } as const)\r\nexport const setError = (payload: TError) => ({ type: SET_INGREDIENTS_ERROR, payload } as const)\r\nexport const setIngredients = (payload: Array<TIngredient>) => ({ type: SET_INGREDIENTS_SUCCESS, payload } as const)\r\nexport const increaseCount = (payload: TincreaseCount) => ({ type: INCREASE_COUNT, payload } as const)\r\nexport const decreaseCount = (payload: string) => ({ type: DECREASE_COUNT, payload } as const)\r\nexport const clearCounts = () => ({ type: CLEAR_COUNTS } as const)\r\n\r\nexport const getIngredients: AppThunk = () => async (dispatch: AppDispatch) => {\r\n  try {\r\n    dispatch(setLoading())\r\n    const data = await Api.getIngredients()\r\n    dispatch(setIngredients(data))\r\n  } catch (error) {\r\n    dispatch(setError(error as TError))\r\n  }\r\n}\r\n","import { TIngredientsActions } from './../actions/burger-ingredients';\r\nimport { TError, TIngredient } from './../../types/data';\r\nimport { INGREDIENTS_TYPES } from '../../utils/constants'\r\nimport {\r\n  SET_INGREDIENTS_ERROR,\r\n  SET_INGREDIENTS_SUCCESS,\r\n  SET_INGREDIENTS_LOADING,\r\n  INCREASE_COUNT,\r\n  DECREASE_COUNT,\r\n  CLEAR_COUNTS,\r\n} from '../actions/burger-ingredients'\r\n\r\nexport const initialState = {\r\n  ingredients: [] as Array<TIngredient>,\r\n  isLoading: false,\r\n  error: null as TError | null\r\n}\r\nexport type TIngredientsState = typeof initialState\r\n\r\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): TIngredientsState => {\r\n  switch (action.type) {\r\n    case SET_INGREDIENTS_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      }\r\n    case SET_INGREDIENTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: null,\r\n        ingredients: action.payload,\r\n      }\r\n    case INCREASE_COUNT:\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients.map(ing => {\r\n          if (ing.type === INGREDIENTS_TYPES.bun\r\n            && ing._id !== action.payload.id\r\n            && action.payload.type === INGREDIENTS_TYPES.bun\r\n          ) { return { ...ing, count: null } }\r\n\r\n          if (ing._id === action.payload.id) {\r\n            if (ing.type === INGREDIENTS_TYPES.bun) {\r\n              return { ...ing, count: 1 }\r\n            } else {\r\n              return { ...ing, count: Number(ing.count) + 1 || 1 }\r\n            }\r\n          } else {\r\n            return { ...ing, count: ing.count }\r\n          }\r\n        })]\r\n      }\r\n    case DECREASE_COUNT:\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients.map(ing => {\r\n          if (ing._id === action.payload) {\r\n            return { ...ing, count: Number(ing.count) - 1 || null }\r\n          }\r\n          return ing\r\n        })]\r\n      }\r\n    case CLEAR_COUNTS:\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients.map(ing => {\r\n          return { ...ing, count: null }\r\n        })]\r\n      }\r\n    case SET_INGREDIENTS_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { TIngredient, TSetOrder, TError } from './../../types/data';\r\nimport { AppDispatch, AppThunk } from './../../types/index';\r\nimport { Api } from '../../utils/api'\r\n\r\nexport const SET_CONSTRUCTOR_LOADING = 'SET_CONSTRUCTOR_LOADING'\r\nexport const SET_CONSTRUCTOR_ERROR = 'SET_CONSTRUCTOR_ERROR'\r\nexport const SET_SELECTED_INGREDIENT = 'SET_SELECTED_INGREDIENT'\r\nexport const REMOVE_CONSTRUCTOR_INGREDIENT = 'REMOVE_CONSTRUCTOR_INGREDIENT'\r\nexport const CLEAR_CONSTRURTOR = 'CLEAR_CONSTRURTOR'\r\nexport const SORT_INGREDIENTS = 'SORT_INGREDIENTS'\r\nexport const SET_ORDER = 'SET_ORDER'\r\nexport const REMOVE_ORDER = 'REMOVE_ORDER'\r\n\r\ntype TRemoveIngredient = {\r\n   idx: number,\r\n   price: number\r\n}\r\ntype TSortIngredient = {\r\n   dragIndex: number,\r\n   hoverIndex: number\r\n}\r\n\r\nexport type TConstructorActions = ReturnType<typeof setConstructorLoading>\r\n   | ReturnType<typeof setConstructorError>\r\n   | ReturnType<typeof setSelectedIngredient>\r\n   | ReturnType<typeof removeConstructorIngredient>\r\n   | ReturnType<typeof clearConstructor>\r\n   | ReturnType<typeof sortIngredients>\r\n   | ReturnType<typeof setOrder>\r\n   | ReturnType<typeof removeOrder>\r\n\r\nexport const setConstructorLoading = () => ({ type: SET_CONSTRUCTOR_LOADING } as const)\r\nexport const setConstructorError = (payload: TError) => ({ type: SET_CONSTRUCTOR_ERROR, payload } as const)\r\nexport const setSelectedIngredient = (payload: TIngredient) => ({ type: SET_SELECTED_INGREDIENT, payload } as const)\r\nexport const removeConstructorIngredient = (payload: TRemoveIngredient) => ({ type: REMOVE_CONSTRUCTOR_INGREDIENT, payload } as const)\r\nexport const clearConstructor = () => ({ type: CLEAR_CONSTRURTOR } as const)\r\nexport const sortIngredients = (payload: TSortIngredient) => ({ type: SORT_INGREDIENTS, payload } as const)\r\nexport const setOrder = (payload: TSetOrder) => ({ type: SET_ORDER, payload } as const)\r\nexport const removeOrder = () => ({ type: REMOVE_ORDER } as const)\r\n\r\nexport const createOrder: AppThunk = (ids) => async (dispatch: AppDispatch) => {\r\n   try {\r\n      dispatch(setConstructorLoading())\r\n      const order = await Api.createOrder(ids)\r\n      dispatch(setOrder(order))\r\n   } catch (error) {\r\n      dispatch(setConstructorError(error as TError))\r\n   }\r\n}\r\n","import { TIngredient, TError } from './../../types/data';\r\nimport { INGREDIENTS_TYPES } from '../../utils/constants'\r\nimport {\r\n  SET_CONSTRUCTOR_ERROR,\r\n  SET_CONSTRUCTOR_LOADING,\r\n  SET_SELECTED_INGREDIENT,\r\n  REMOVE_CONSTRUCTOR_INGREDIENT,\r\n  CLEAR_CONSTRURTOR,\r\n  SORT_INGREDIENTS,\r\n  SET_ORDER,\r\n  REMOVE_ORDER,\r\n  TConstructorActions,\r\n} from '../actions/burger-constructor'\r\n\r\nexport const initialState = {\r\n  selectedIngredients: [] as Array<TIngredient>,\r\n  selectedBun: null as TIngredient | null,\r\n  bunsSum: 0,\r\n  ingredientsSum: 0,\r\n  orderNumber: null as number | null,\r\n  isLoading: false,\r\n  error: null as TError | null,\r\n}\r\ntype TConstructorState = typeof initialState\r\n\r\nexport const constructorReducer = (state = initialState, action: TConstructorActions): TConstructorState => {\r\n  switch (action.type) {\r\n    case SET_CONSTRUCTOR_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      }\r\n    case SET_SELECTED_INGREDIENT:\r\n      if (action.payload.type === INGREDIENTS_TYPES.bun) {\r\n        return {\r\n          ...state,\r\n          selectedBun: action.payload,\r\n          bunsSum: action.payload.price * 2,\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          selectedIngredients: [\r\n            ...state.selectedIngredients,\r\n            action.payload,\r\n          ],\r\n          ingredientsSum: state.ingredientsSum + action.payload.price,\r\n        }\r\n      }\r\n    case REMOVE_CONSTRUCTOR_INGREDIENT:\r\n      return {\r\n        ...state,\r\n        selectedIngredients:\r\n          state.selectedIngredients.filter((ing, idx) =>\r\n            idx !== action.payload.idx\r\n          ),\r\n        ingredientsSum: Number(state.ingredientsSum) - action.payload.price,\r\n      }\r\n    case CLEAR_CONSTRURTOR:\r\n      return {\r\n        ...initialState\r\n      }\r\n    case SORT_INGREDIENTS:\r\n      const sortIngredients = [...state.selectedIngredients]\r\n\r\n      const dragIndex = action.payload.dragIndex\r\n      const hoverIndex = action.payload.hoverIndex\r\n\r\n      const [dragIngredient] = sortIngredients.splice(dragIndex, 1)\r\n      sortIngredients.splice(hoverIndex, 0, dragIngredient)\r\n\r\n      return {\r\n        ...state,\r\n        selectedIngredients: sortIngredients\r\n      }\r\n    case SET_ORDER:\r\n      return {\r\n        ...state,\r\n        orderNumber: action.payload.number,\r\n        isLoading: false\r\n      }\r\n    case REMOVE_ORDER:\r\n      return {\r\n        ...state,\r\n        orderNumber: initialState.orderNumber\r\n      }\r\n    case SET_CONSTRUCTOR_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import { TError } from './../../types/data';\r\nimport {\r\n   SET_AUTH_LOADING,\r\n   SET_AUTH_ERROR,\r\n   SET_USER,\r\n   SET_MESSAGE,\r\n   CLEAR_USER,\r\n   RESPONSED_EMAIL,\r\n   TAuthActions\r\n} from '../actions/auth'\r\n\r\nconst refreshToken = localStorage.getItem('refreshToken');\r\n\r\nconst initialState = {\r\n   name: '',\r\n   email: '',\r\n   isLoading: false,\r\n   error: null as TError | null,\r\n   message: '',\r\n   isAuth: !!refreshToken,\r\n   isResponsedEmail: false,\r\n}\r\nexport type TAuthState = typeof initialState\r\n\r\nexport const authReducer = (state = initialState, action: TAuthActions): TAuthState => {\r\n   switch (action.type) {\r\n      case SET_AUTH_LOADING:\r\n         return {\r\n            ...state,\r\n            isLoading: true,\r\n            error: null,\r\n         }\r\n      case SET_USER:\r\n         return {\r\n            ...state,\r\n            name: action.payload.name,\r\n            email: action.payload.email,\r\n            isAuth: true,\r\n            isLoading: false,\r\n            error: null,\r\n         }\r\n      case SET_MESSAGE:\r\n         return {\r\n            ...state,\r\n            message: action.payload.message,\r\n            isLoading: false,\r\n            error: null,\r\n         }\r\n      case CLEAR_USER:\r\n         return {\r\n            ...initialState,\r\n            isAuth: false\r\n         }\r\n      case RESPONSED_EMAIL:\r\n         return {\r\n            ...state,\r\n            isResponsedEmail: action.payload,\r\n         }\r\n      case SET_AUTH_ERROR:\r\n         return {\r\n            ...state,\r\n            isLoading: false,\r\n            isAuth: false,\r\n            error: action.payload\r\n         }\r\n      default:\r\n         return state\r\n   }\r\n}","import { TOrder, TError } from '../../types/data'\r\nimport {\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_GET_MESSAGE,\r\n  SET_CURRENT_NUMBER,\r\n  TFeedActions,\r\n} from '../actions/feed'\r\n\r\nexport const initialState = {\r\n  orders: [] as Array<TOrder>,\r\n  total: null as number | null,\r\n  totalToday: null as number | null,\r\n  currentNumber: null as string | null,\r\n  isLoading: false,\r\n  error: null as TError | null,\r\n}\r\nexport type TFeedState = typeof initialState\r\n\r\nexport const feedReducer = (state = initialState, action: TFeedActions): TFeedState => {\r\n  switch (action.type) {\r\n    case WS_FEED_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      }\r\n    case WS_FEED_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        orders: action.payload.orders,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n      }\r\n    case SET_CURRENT_NUMBER:\r\n      return {\r\n        ...state,\r\n        currentNumber: String(action.payload)\r\n      }\r\n    case WS_FEED_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: null\r\n      }\r\n    case WS_FEED_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import { TOrder, TError } from '../../types/data'\r\nimport {\r\n  WS_HISTORY_CONNECTION_SUCCESS,\r\n  WS_HISTORY_GET_MESSAGE,\r\n  WS_HISTORY_CONNECTION_CLOSED,\r\n  WS_HISTORY_CONNECTION_ERROR,\r\n  THistoryActions,\r\n} from '../actions/history'\r\n\r\nexport const initialState = {\r\n  orders: [] as Array<TOrder>,\r\n  isLoading: false,\r\n  error: null as TError | null,\r\n}\r\n\r\nexport type THistoryState = typeof initialState\r\n\r\nexport const historyReducer = (state = initialState, action: THistoryActions): THistoryState => {\r\n  switch (action.type) {\r\n    case WS_HISTORY_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      }\r\n    case WS_HISTORY_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        orders: action.payload.orders\r\n      }\r\n    case WS_HISTORY_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: null\r\n      }\r\n    case WS_HISTORY_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        error: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import { combineReducers } from \"redux\"\r\nimport { ingredientsReducer } from \"./burger-ingredients\"\r\nimport { constructorReducer } from \"./burger-constructor\"\r\nimport { authReducer } from \"./auth\"\r\nimport { feedReducer } from \"./feed\"\r\nimport { historyReducer } from \"./history\"\r\n\r\nexport const rootReducer = combineReducers({\r\n   ingredients: ingredientsReducer,\r\n   selectedIngredients: constructorReducer,\r\n   auth: authReducer,\r\n   feed: feedReducer,\r\n   history: historyReducer,\r\n})\r\n","import { applyMiddleware, compose, createStore } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { socketMiddleware } from '../middleware/socket-middleware'\r\nimport { ThunkMiddleware } from '../types'\r\n\r\nimport {\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_CONNECTION_START,\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_GET_MESSAGE,\r\n  WS_FEED_SEND_MESSAGE,\r\n} from './actions/feed'\r\nimport {\r\n  WS_HISTORY_CONNECTION_CLOSED,\r\n  WS_HISTORY_CONNECTION_ERROR,\r\n  WS_HISTORY_CONNECTION_START,\r\n  WS_HISTORY_CONNECTION_SUCCESS,\r\n  WS_HISTORY_GET_MESSAGE,\r\n  WS_HISTORY_SEND_MESSAGE\r\n} from './actions/history'\r\nimport { rootReducer } from \"./reducers\"\r\n\r\nconst wsFeedUrl = 'wss://norma.nomoreparties.space/orders/all'\r\nconst wsFeedActions = {\r\n  wsInit: WS_FEED_CONNECTION_START,\r\n  onOpen: WS_FEED_CONNECTION_SUCCESS,\r\n  onClose: WS_FEED_CONNECTION_CLOSED,\r\n  onError: WS_FEED_CONNECTION_ERROR,\r\n  onMessage: WS_FEED_GET_MESSAGE,\r\n  wsSendMessage: WS_FEED_SEND_MESSAGE,\r\n} as const\r\nconst wsFeed = socketMiddleware(wsFeedUrl, wsFeedActions)\r\n\r\nconst wsHistoryUrl = 'wss://norma.nomoreparties.space/orders'\r\nconst wsHistoryActions = {\r\n  wsInit: WS_HISTORY_CONNECTION_START,\r\n  onOpen: WS_HISTORY_CONNECTION_SUCCESS,\r\n  onClose: WS_HISTORY_CONNECTION_CLOSED,\r\n  onError: WS_HISTORY_CONNECTION_ERROR,\r\n  onMessage: WS_HISTORY_GET_MESSAGE,\r\n  wsSendMessage: WS_HISTORY_SEND_MESSAGE,\r\n} as const\r\nconst wsHistory = socketMiddleware(wsHistoryUrl, wsHistoryActions)\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(\r\n  thunk as ThunkMiddleware,\r\n  wsFeed,\r\n  wsHistory\r\n))\r\n\r\nexport const store = createStore(rootReducer, enhancer)","import {\r\n   TypedUseSelectorHook,\r\n   useDispatch as dispatchHook,\r\n   useSelector as selectorHook\r\n} from 'react-redux';\r\nimport { AppDispatch, RootState } from '../types/index';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","export default __webpack_public_path__ + \"static/media/logo.e5f93856.svg\";","import { FC } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { MenuIcon } from \"@ya.praktikum/react-developer-burger-ui-components/dist/ui/icons\"\r\nimport logo from \"../../images/logo.svg\"\r\nimport styles from './app-header.module.css'\r\n\r\nexport const AppHeader: FC = () => {\r\n\r\n   return (\r\n      <div className={styles.root}>\r\n         <header className={`${styles.header} pt-5 pb-5`}>\r\n            <div className={`${styles.mobile_header} pl-5 pr-5`}>\r\n               <img src={logo} alt=\"LOGO\" />\r\n               <MenuIcon type=\"primary\" />\r\n            </div>\r\n            <div className={styles.leftBlock}>\r\n               <NavLink\r\n                  exact\r\n                  to=\"/\"\r\n                  className={styles.link}\r\n                  activeClassName={styles.active}\r\n               >\r\n                  <BurgerIcon type=\"secondary\" />\r\n                  <p className=\"text text_type_main-default ml-2\">\r\n                     Конструктор\r\n                  </p>\r\n               </NavLink>\r\n               <NavLink\r\n                  to=\"/feed\"\r\n                  className={`${styles.link}`}\r\n                  activeClassName={styles.active}>\r\n                  <ListIcon type=\"secondary\" />\r\n                  <p className=\"text text_type_main-default ml-2\">\r\n                     Лента заказов\r\n                  </p>\r\n               </NavLink>\r\n            </div>\r\n            <NavLink\r\n               to=\"/\"\r\n               className={styles.logo}\r\n            >\r\n               <Logo />\r\n            </NavLink>\r\n            <NavLink\r\n               to=\"/profile\"\r\n               className={`${styles.link}`}\r\n               activeClassName={styles.active}\r\n            >\r\n               <ProfileIcon type=\"secondary\" />\r\n               <p className=\"text text_type_main-default ml-2\">\r\n                  Личный кабинет\r\n               </p>\r\n            </NavLink>\r\n         </header >\r\n      </div>\r\n   )\r\n}","import { FC } from 'react'\r\nimport logo from '../../images/logo.svg'\r\nimport styles from './loading.module.css'\r\n\r\nexport const Loading: FC = () => {\r\n\r\n   return (\r\n      <div className={styles.root}>\r\n         <div className={styles.image_wrapper}>\r\n            <img className={styles.image} src={logo} alt=\"Загрузка...\" />\r\n         </div>\r\n      </div>\r\n   )\r\n}","import { useCallback, useState, ChangeEvent } from 'react'\r\nimport { useDispatch, useSelector } from '../utils/hooks'\r\nimport { Link } from 'react-router-dom'\r\nimport { EmailInput, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { loginRequest } from '../services/actions/auth'\r\nimport { Loading } from '../components/loading/loading'\r\nimport styles from './login.module.css'\r\n\r\n\r\nexport const Login = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const { error, isLoading } = useSelector(state => state.auth)\r\n\r\n  const [form, setForm] = useState({ email: '', password: '' })\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  const handleSubmit = useCallback(e => {\r\n    e.preventDefault()\r\n    dispatch(loginRequest(form))\r\n    setForm({ email: '', password: '' })\r\n  }, [form, dispatch])\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      {isLoading && <Loading />}\r\n      {error &&\r\n        <p className={`${styles.error} text text_type_main-medium`} >\r\n          {error.message}\r\n        </p>\r\n      }\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className={`${styles.form} pb-5  mb-5 mt-4`}\r\n      >\r\n        <p className=\"text text_type_main-medium mb-5\">\r\n          Вход\r\n        </p>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <EmailInput\r\n            name={'email'}\r\n            onChange={onChange}\r\n            value={form.email}\r\n          />\r\n        </div>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <PasswordInput\r\n            name={'password'}\r\n            onChange={onChange}\r\n            value={form.password}\r\n          />\r\n        </div>\r\n        <div className=\"pt-1 pb-5 mb-5\">\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n          >\r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <div className={`${styles.text} mb-4`}>\r\n        <p className=\"text text_type_main-default mr-2\">\r\n          Вы - новый пользователь?\r\n        </p>\r\n        <Link\r\n          className={styles.link}\r\n          to='/register'\r\n        >\r\n          Зарегистрироваться\r\n        </Link>\r\n      </div>\r\n      <div className={styles.text}>\r\n        <p className=\"text text_type_main-default mr-2\">\r\n          Забыли пароль?\r\n        </p>\r\n        <Link\r\n          className={styles.link}\r\n          to='/forgot-password'\r\n        >\r\n          Восстановить пароль\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useCallback, useState, ChangeEvent } from 'react'\r\nimport { useDispatch, useSelector } from '../utils/hooks'\r\nimport { Link } from 'react-router-dom'\r\nimport { EmailInput, PasswordInput, Button, Input } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { registerRequest } from '../services/actions/auth'\r\nimport { Loading } from '../components/loading/loading'\r\nimport styles from './login.module.css'\r\n\r\n\r\nexport const Register = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const { error, isLoading } = useSelector(state => state.auth)\r\n\r\n  const [form, setForm] = useState({ name: '', email: '', password: '' })\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  const handleSubmit = useCallback(e => {\r\n    e.preventDefault()\r\n    dispatch(registerRequest(form))\r\n    setForm({ email: '', password: '', name: '' })\r\n  }, [dispatch, form])\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      {isLoading && <Loading />}\r\n      {error &&\r\n        <p className={`${styles.error} text text_type_main-medium`} >\r\n          {error.message}\r\n        </p>\r\n      }\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className={`${styles.form} pb-5  mb-5  mt-4`}\r\n      >\r\n        <p className=\"text text_type_main-medium mb-5\">\r\n          Регистрация\r\n        </p>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <Input\r\n            name={'name'}\r\n            placeholder={'Имя'}\r\n            onChange={onChange}\r\n            value={form.name}\r\n          />\r\n        </div>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <EmailInput\r\n            name={'email'}\r\n            onChange={onChange}\r\n            value={form.email}\r\n          />\r\n        </div>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <PasswordInput\r\n            name={'password'}\r\n            onChange={onChange}\r\n            value={form.password}\r\n          />\r\n        </div>\r\n        <div className=\"pt-1 pb-5 mb-5\">\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n          >\r\n            Зарегистрироваться\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <div className={styles.text}>\r\n        <p className=\"text text_type_main-default mr-2\">\r\n          Уже зарегистрированы?\r\n        </p>\r\n        <Link\r\n          className={styles.link}\r\n          to='/login'\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useCallback, useState, ChangeEvent } from 'react'\r\nimport { useDispatch, useSelector } from '../utils/hooks'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { restorePasswordRequest } from '../services/actions/auth'\r\nimport { Loading } from '../components/loading/loading'\r\nimport styles from './login.module.css'\r\n\r\n\r\nexport const RestorePassword = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const { error, isResponsedEmail, isLoading } = useSelector(state => state.auth)\r\n\r\n  const [email, setEmail] = useState('')\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = useCallback(e => {\r\n    e.preventDefault()\r\n    dispatch(restorePasswordRequest(email))\r\n    setEmail('')\r\n  }, [email, dispatch])\r\n\r\n  if (isResponsedEmail) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/reset-password'\r\n        }}\r\n      />\r\n    )\r\n  }\r\n  return (\r\n    <div className={styles.root}>\r\n      {isLoading && <Loading />}\r\n      {error &&\r\n        <p className={`${styles.error} text text_type_main-medium`} >\r\n          {error.message}\r\n        </p>\r\n      }\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className={`${styles.form} pb-5  mb-5  mt-4`}\r\n      >\r\n        <p className={`${styles.title} text text_type_main-medium mb-5`}>\r\n          Восстановление пароля\r\n        </p>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <Input\r\n            name={'email'}\r\n            placeholder={'Укажите e-mail'}\r\n            onChange={onChange}\r\n            value={email}\r\n          />\r\n        </div>\r\n        <div className=\"pt-1 pb-5 mb-5\">\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n          >\r\n            Восстановить\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <div className={styles.text}>\r\n        <p className=\"text text_type_main-default mr-2\">\r\n          Вспомнили пароль?\r\n        </p>\r\n        <Link\r\n          className={styles.link}\r\n          to='/login'\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useCallback, useEffect, useState, ChangeEvent } from 'react'\r\nimport { useDispatch, useSelector } from '../utils/hooks'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { responsedEmail, setNewPassword } from '../services/actions/auth'\r\nimport { Loading } from '../components/loading/loading'\r\nimport styles from './login.module.css'\r\n\r\nexport const SaveNewPassword = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const { error, isResponsedEmail, isLoading } = useSelector(state => state.auth)\r\n\r\n  const [form, setForm] = useState({ password: '', token: '' })\r\n\r\n  const onChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(responsedEmail(false))\r\n    }\r\n  }, [dispatch])\r\n\r\n  const handleSubmit = useCallback(e => {\r\n    e.preventDefault()\r\n    dispatch(setNewPassword(form))\r\n    setForm({ password: '', token: '' })\r\n  }, [form, dispatch])\r\n\r\n  if (!isResponsedEmail) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/forgot-password'\r\n        }}\r\n      />\r\n    )\r\n  }\r\n  return (\r\n    <div className={styles.root}>\r\n      {isLoading && <Loading />}\r\n      {error &&\r\n        <p className={`${styles.error} text text_type_main-medium`} >\r\n          {error.message}\r\n        </p>\r\n      }\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className={`${styles.form} pb-5  mb-5 mt-4`}\r\n      >\r\n        <p className={`${styles.title} text text_type_main-medium mb-5`}>\r\n          Восстановление пароля\r\n        </p>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <Input\r\n            name={'password'}\r\n            type={'password'}\r\n            placeholder={'Введите новый пароль'}\r\n            icon={\"ShowIcon\"}\r\n            onChange={onChange}\r\n            value={form.password}\r\n          />\r\n        </div>\r\n        <div className={`${styles.field} mb-5 pt-1`} >\r\n          <Input\r\n            name={'token'}\r\n            placeholder={'Введите код из письма'}\r\n            onChange={onChange}\r\n            value={form.token}\r\n          />\r\n        </div>\r\n        <div className=\"pt-1 pb-5 mb-5\">\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n          >\r\n            Сохранить\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <div className={styles.text}>\r\n        <p className=\"text text_type_main-default mr-2\">\r\n          Вспомнили пароль?\r\n        </p>\r\n        <Link\r\n          className={styles.link}\r\n          to='/login'\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { FC } from 'react'\r\nimport { RouteProps } from 'react-router'\r\nimport { Redirect, Route } from 'react-router-dom'\r\nimport { useSelector } from '../utils/hooks'\r\n\r\ntype TProtectedRoute = {\r\n   path: string;\r\n} & RouteProps\r\n\r\nexport const ProtectedRoute: FC<TProtectedRoute> = ({ children, ...rest }) => {\r\n\r\n   const { isAuth } = useSelector(state => state.auth)\r\n\r\n   return (\r\n      <Route\r\n         {...rest}\r\n         render={props =>\r\n            isAuth ? (\r\n               children\r\n            ) : (\r\n               <Redirect\r\n                  to={{\r\n                     pathname: '/login',\r\n                     state: { from: props.location }\r\n                  }}\r\n               />\r\n            )\r\n         }\r\n      />\r\n   )\r\n}\r\n","import { useEffect, FC } from 'react'\r\nimport styles from './modal-overlay.module.css'\r\n\r\ntype TModalOverlay = {\r\n   onClose: () => void\r\n}\r\n\r\nexport const ModalOverlay: FC<TModalOverlay> = ({ onClose }) => {\r\n   useEffect(() => {\r\n      const handleESCclose = (e: KeyboardEvent) => {\r\n         if (e.code === \"Escape\") {\r\n            onClose()\r\n         }\r\n      }\r\n      document.addEventListener(\"keydown\", handleESCclose)\r\n\r\n      return () => {\r\n         document.removeEventListener(\"keydown\", handleESCclose)\r\n      }\r\n   }, [onClose])\r\n\r\n   return (\r\n      <div\r\n         className={`${styles.wrapper} p-5`}\r\n         onClick={onClose}\r\n      />\r\n   )\r\n}","import { FC } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { ModalOverlay } from '../modal-overlay/modal-overlay'\r\nimport styles from './modal.module.css'\r\n\r\ntype TModal = {\r\n   title?: string,\r\n   onClose: () => void,\r\n}\r\n\r\nexport const Modal: FC<TModal> = ({ title, onClose, children }) => {\r\n\r\n   const portalDiv = document.getElementById('react-modals');\r\n\r\n   return portalDiv && createPortal(\r\n      <>\r\n         <ModalOverlay onClose={onClose} />\r\n\r\n         <div className={`${styles.root} p-5`} >\r\n            <header className={styles.header}>\r\n               <p className=\"text text_type_main-large\">\r\n                  {title}\r\n               </p>\r\n               <button\r\n                  className={styles.closeButton}\r\n                  onClick={onClose}\r\n               >\r\n                  <CloseIcon type=\"primary\" />\r\n               </button>\r\n            </header>\r\n            {children}\r\n         </div>\r\n      </>,\r\n      portalDiv\r\n   )\r\n}","import { FC } from 'react'\r\nimport styles from './ingredient-card.module.css'\r\n\r\ntype TIngredientCard = {\r\n  src: string,\r\n  zIndex?: number,\r\n  count?: number\r\n}\r\n\r\nexport const IngredientCard: FC<TIngredientCard> = ({ src, zIndex, count }) => {\r\n  return (\r\n    <li\r\n      className={styles.card_wrapper}\r\n      style={{ zIndex: zIndex }}\r\n    >\r\n      {count &&\r\n        <div\r\n          className={styles.count}\r\n          style={{ zIndex: Number(zIndex) + 1 }}\r\n        >\r\n          <p className=\"text text_type_digits-default\">\r\n            {Number(`${count}`)}\r\n          </p>\r\n        </div>}\r\n      <img\r\n        className={styles.image}\r\n        src={src}\r\n        alt=\"img\"\r\n      />\r\n    </li>\r\n  )\r\n}","import { INGREDIENTS_TYPES } from './constants'\r\nimport { TIngredient } from './../types/data';\r\n\r\nexport const getIngredientsSum = (ingredientsAll: Array<TIngredient> = [], selectedIds: Array<TIngredient['_id']> = []) => {\r\n   let result = 0\r\n   selectedIds?.forEach(id => {\r\n      ingredientsAll?.forEach(ing => {\r\n         if (ing._id === id && ing.type === INGREDIENTS_TYPES.bun) {\r\n            result = result + ing.price * 2\r\n         }\r\n         if (ing._id === id && ing.type !== INGREDIENTS_TYPES.bun) {\r\n            result = result + ing.price\r\n         }\r\n      })\r\n   })\r\n   return result\r\n}","\r\n\r\nexport const getFormatDate = (date: string): string => {\r\n   if (!date) return \"\"\r\n\r\n   const formatedDate = new Intl.DateTimeFormat('ru-ru', {\r\n      timeZoneName: 'short',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n   }).format(new Date(date))\r\n\r\n   return formatedDate\r\n}","import { useCallback, useMemo, FC } from 'react'\r\nimport { useSelector } from '../../utils/hooks'\r\nimport { INGREDIENTS_TYPES, STATUS_TYPES_NAME } from '../../utils/constants'\r\nimport { TOrder } from '../../types/data'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { IngredientCard } from '../ingredient-card/ingredient-card'\r\nimport { getIngredientsSum } from '../../utils/get-ingredients-sum'\r\nimport styles from './order-card.module.css'\r\nimport { getFormatDate } from '../../utils/get-format-date '\r\n\r\ntype TOrderCardProps = {\r\n  order: TOrder,\r\n  onClick: (_id: string, number: number) => void,\r\n  status?: string\r\n}\r\n\r\nexport const OrderCard: FC<TOrderCardProps> = ({ order, onClick, status }) => {\r\n\r\n  const { ingredients } = useSelector(state => state.ingredients)\r\n\r\n  const { number, name, createdAt, _id } = useMemo(() => order, [order])\r\n  const ingredientsIds = useMemo(() => [...order.ingredients], [order])\r\n\r\n  const sumOrder = useMemo(\r\n    () => getIngredientsSum(ingredients, ingredientsIds),\r\n    [ingredients, ingredientsIds]\r\n  )\r\n  const formatedDate = useMemo(() => getFormatDate(createdAt), [createdAt])\r\n\r\n  const images = useMemo(() => {\r\n    let result: Array<string> = []\r\n    ingredientsIds?.forEach(id => {\r\n      ingredients?.forEach(ing => {\r\n        if (ing._id === id && ing.type === INGREDIENTS_TYPES.bun) {\r\n          result.unshift(ing.image)\r\n        }\r\n        if (ing._id === id && ing.type !== INGREDIENTS_TYPES.bun) {\r\n          if (!result.includes(ing.image)) {\r\n            result.push(ing.image)\r\n          }\r\n        }\r\n      })\r\n    })\r\n    return result\r\n  }, [ingredientsIds, ingredients])\r\n\r\n  const handlelClick = useCallback(() => {\r\n    onClick(_id, number)\r\n  }, [onClick, _id, number])\r\n\r\n  return (\r\n    <li\r\n      className={`${styles.card} p-3 mb-2`}\r\n      onClick={handlelClick}\r\n    >\r\n      <div className={`${styles.info} m-3`}>\r\n        <p className=\"text text_type_digits-default\">{number}</p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {formatedDate}\r\n        </p>\r\n      </div>\r\n      <div className=\"p-3\">\r\n        <p className=\"text text_type_main-medium\">\r\n          {name}\r\n        </p>\r\n        {!!status &&\r\n          <p className=\"text text_type_main-default mt-2\">\r\n            {STATUS_TYPES_NAME[status]}\r\n          </p>}\r\n      </div>\r\n      <div className={styles.bottom_block}>\r\n\r\n        <ul className={`${styles.section} m-3`} >\r\n          {images?.map((img, i) =>\r\n            (i < 4) &&\r\n            <IngredientCard\r\n              key={`${img}-${i}`}\r\n              src={img}\r\n              zIndex={Number(images.length) - i}\r\n            />\r\n          )}\r\n          {(images.length > 4) &&\r\n            <IngredientCard\r\n              src=\"https://code.s3.yandex.net/react/code/cheese.png\"\r\n              zIndex={0}\r\n              count={images.length - 4}\r\n            />\r\n          }\r\n        </ul>\r\n        <div className={`${styles.price} mr-4`}>\r\n          <p className=\"text text_type_digits-default mr-3\">\r\n            {sumOrder}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n}","import { useCallback } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useSelector, useDispatch } from '../utils/hooks'\nimport { OrderCard } from '../components/order-card/order-card'\nimport { setCurrentNumber } from '../services/actions/feed'\nimport styles from './orders-history.module.css'\nimport { Loading } from '../components/loading/loading'\n\n\nexport const OrdersHistory = () => {\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const { error } = useSelector(state => state.auth)\n  const { orders, isLoading } = useSelector(state => state.history)\n\n  const handlelClick = useCallback((id, number) => {\n    dispatch(setCurrentNumber(number))\n    history.push(`/profile/orders/${id}`)\n  }, [history, dispatch])\n\n  return (\n    <div className={`${styles.wrapper} mt-5 ml-5`}>\n      {!!error &&\n        <p className=\"text text_type_main-medium\">\n          {error.message}\n        </p>\n      }\n      {isLoading && <Loading />}\n      <ul className={`${styles.cards} p-1`}>\n        {orders?.map(order =>\n          <OrderCard\n            key={order._id}\n            order={order}\n            onClick={handlelClick}\n            status={order.status}\n          />\n        )}\n      </ul>\n    </div>\n  )\n}","import { useMemo, FC } from 'react'\r\nimport { STATUS_TYPES_NAME } from '../../utils/constants'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { TIngredient, TOrder } from '../../types/data'\r\nimport { IngredientCard } from '../ingredient-card/ingredient-card'\r\nimport { getIngredientsSum } from '../../utils/get-ingredients-sum'\r\nimport { getIngredientsCount } from '../../utils/get-ingredients-count'\r\nimport { getFormatDate } from '../../utils/get-format-date '\r\nimport styles from './order-page.module.css'\r\n\r\ntype TOrderPage = {\r\n  id: TOrder[\"_id\"],\r\n  title: string,\r\n  ingredientsAll: Array<TIngredient>,\r\n  orders: Array<TOrder>,\r\n}\r\n\r\nexport const OrderPage: FC<TOrderPage> = ({ title, ingredientsAll, orders, id }) => {\r\n  const { name, number, status, updatedAt, ingredients } = useMemo(\r\n    () => orders?.find(order => order._id === id) || {} as TOrder\r\n    , [orders, id])\r\n\r\n  const formatedDate = useMemo(() => getFormatDate(updatedAt), [updatedAt])\r\n\r\n  const sumOrder = useMemo(\r\n    () => getIngredientsSum(ingredientsAll, ingredients),\r\n    [ingredientsAll, ingredients]\r\n  )\r\n  const selectedIng = useMemo(\r\n    () => getIngredientsCount(ingredientsAll, ingredients),\r\n    [ingredientsAll, ingredients]\r\n  )\r\n  return (\r\n    <div className={styles.root}>\r\n      {!title &&\r\n        <div className={styles.header}>\r\n          <p className=\"text text_type_digits-default pb-5\">\r\n            {number}\r\n          </p>\r\n        </div >}\r\n      <p className=\"text text_type_main-medium mt-5\">\r\n        {name}\r\n      </p>\r\n      <div className={styles.status}>\r\n        <p className=\"text text_type_main-default mt-3\">\r\n          {STATUS_TYPES_NAME[status]}\r\n        </p>\r\n      </div>\r\n      <p className={`${styles.title} text text_type_main-medium mb-5 pb-1 `}>\r\n        Состав:\r\n      </p>\r\n      <ul className={styles.list_items}>\r\n        {selectedIng?.map((ing, i) =>\r\n          <li\r\n            key={`${ing._id}${i}`}\r\n            className={`${styles.item} m-4 pl-1`}\r\n          >\r\n            <section className={styles.section}>\r\n              <IngredientCard\r\n                src={ing.image}\r\n              />\r\n              <p className=\"text text_type_main-default ml-4\">\r\n                {ing.name}\r\n              </p>\r\n            </section>\r\n            <div className={styles.price}>\r\n              <p className=\"text text_type_digits-default mr-2\">\r\n                {ing.count} X {ing.price}\r\n              </p>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n          </li>\r\n        )}\r\n      </ul>\r\n      <div className={`${styles.bottom_block} pt-5 mt-5`} >\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {formatedDate}\r\n        </p>\r\n        <div className={styles.price}>\r\n          <p className=\"text text_type_digits-default mr-2\">\r\n            {sumOrder}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { TIngredient } from './../types/data';\r\nimport { INGREDIENTS_TYPES } from './constants'\r\n\r\ntype TIngredientCountsById = {\r\n   [key: string]: number\r\n}\r\n\r\nexport const getIngredientsCount = (ingredientsAll: Array<TIngredient> = [], selectedIds: Array<TIngredient[\"_id\"]> = []) => {\r\n   const ingredientCountsById: TIngredientCountsById = {}\r\n   selectedIds?.forEach((id) => {\r\n      ingredientCountsById[id] = (ingredientCountsById[id] || 0) + 1\r\n   })\r\n\r\n   const selectedIng: Array<TIngredient> = []\r\n   Object.keys(ingredientCountsById).forEach(id => {\r\n      ingredientsAll.forEach((ing => {\r\n         if (ing._id === id && ing.type !== INGREDIENTS_TYPES.bun) {\r\n            selectedIng.push({ ...ing, count: ingredientCountsById[id] })\r\n         } else if (ing._id === id && ing.type === INGREDIENTS_TYPES.bun) {\r\n            selectedIng.unshift({ ...ing, count: 2 })\r\n         }\r\n      }))\r\n   })\r\n   return selectedIng\r\n}","import { FC } from 'react'\r\nimport { useSelector } from '../utils/hooks'\r\nimport { useParams } from 'react-router-dom'\r\nimport { Loading } from '.././components/loading/loading'\r\nimport { OrderPage } from '../components/order-page/order-page'\r\n\r\ntype THistoryPage = {\r\n  title: string\r\n}\r\n\r\nexport const HistoryPage: FC<THistoryPage> = ({ title }) => {\r\n\r\n  const { id } = useParams<{ id: string }>()\r\n\r\n  const { ingredients: ingredientsAll } = useSelector(state => state.ingredients)\r\n  const { orders, isLoading } = useSelector(state => state.history)\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <Loading />}\r\n      <OrderPage\r\n        id={id}\r\n        title={title}\r\n        ingredientsAll={ingredientsAll}\r\n        orders={orders}\r\n      />\r\n    </>\r\n  )\r\n}","import { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { useSelector, useDispatch } from '../utils/hooks'\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { updateUserRequest } from '../services/actions/auth'\r\nimport { Loading } from '../components/loading/loading'\r\nimport styles from './profile.module.css'\r\n\r\n\r\nexport const Profile = () => {\r\n  const dispatch = useDispatch()\r\n  const { email, name, error, isLoading } = useSelector(state => state.auth)\r\n\r\n  const [form, setForm] = useState({\r\n    email: '',\r\n    password: '',\r\n    name: '',\r\n  })\r\n\r\n  useEffect(() => {\r\n    setForm(state => ({\r\n      ...state,\r\n      email,\r\n      name,\r\n    }))\r\n  }, [email, name])\r\n\r\n  const isVisibleButtons = useMemo(() =>\r\n    form.name !== name ||\r\n    form.email !== email ||\r\n    form.password !== ''\r\n    , [form, name, email])\r\n\r\n  const onChange = useCallback(e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }, [form])\r\n\r\n  const handleSubmit = useCallback(e => {\r\n    e.preventDefault()\r\n    dispatch(updateUserRequest(form))\r\n  }, [dispatch, form])\r\n\r\n  const buttonUndo = useCallback(() => {\r\n    setForm({\r\n      email: email || '',\r\n      password: '',\r\n      name: name || '',\r\n    })\r\n  }, [setForm, email, name])\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className={`${styles.form} ml-5`}\r\n    >\r\n      {error &&\r\n        <p className={`${styles.error} text text_type_main-medium`} >\r\n          {error.message}\r\n        </p>\r\n      }\r\n      {isLoading && <Loading />}\r\n      <div className={`${styles.field} mb-5 pt-1`} >\r\n        <Input\r\n          name={'name'}\r\n          icon={\"EditIcon\"}\r\n          placeholder={'Имя'}\r\n          onChange={onChange}\r\n          value={form.name}\r\n        />\r\n      </div>\r\n      <div className={`${styles.field} mb-5 pt-1`} >\r\n        <Input\r\n          name={'email'}\r\n          icon={\"EditIcon\"}\r\n          placeholder={'Логин'}\r\n          onChange={onChange}\r\n          value={form.email}\r\n        />\r\n      </div>\r\n      <div className={`${styles.field} mb-5 pt-1`} >\r\n        <Input\r\n          name={'password'}\r\n          icon={\"EditIcon\"}\r\n          placeholder={'Пароль'}\r\n          onChange={onChange}\r\n          value={form.password}\r\n        />\r\n      </div>\r\n      {isVisibleButtons && (\r\n        <div className={`${styles.buttonBlock} mb-5 pt-1`}>\r\n          <Button\r\n            type=\"secondary\"\r\n            size=\"medium\"\r\n            onClick={buttonUndo}\r\n          >\r\n            Отмена\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n          >\r\n            Сохранить\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </form>\r\n  )\r\n}","import { useCallback, useEffect, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { NavLink, Switch, Route, useHistory, useLocation } from 'react-router-dom'\r\nimport { ProtectedRoute } from '../components/protected-route'\r\nimport { Modal } from '../components/modal/modal'\r\nimport { OrdersHistory } from '../pages/orders-history'\r\nimport { HistoryPage } from '../pages/history-page'\r\nimport { Profile } from '../pages/profile'\r\nimport { logoutRequest, getUserRequest } from '../services/actions/auth'\r\nimport { wsHistoryStart } from '../services/actions/history'\r\nimport styles from './profile-layout.module.css'\r\n\r\nexport const ProfileLayout = () => {\r\n\r\n   const { currentNumber } = useSelector(state => state.feed)\r\n   const location = useLocation()\r\n   const history = useHistory()\r\n   const isShowModal = history.action === 'PUSH'\r\n\r\n   const onClickCloseButton = useCallback(() => {\r\n      history.go(-1)\r\n   }, [history])\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   useEffect(() => {\r\n      dispatch(getUserRequest())\r\n   }, [dispatch])\r\n\r\n   const buttonLogout = useCallback(() => {\r\n      dispatch(logoutRequest())\r\n   }, [dispatch])\r\n\r\n   useEffect(() => {\r\n      dispatch(wsHistoryStart())\r\n   }, [dispatch])\r\n\r\n   const navBarLinks = useMemo(\r\n      () => ['/profile', '/profile/orders', isShowModal ? '/profile/orders/:id' : ''],\r\n      [isShowModal]\r\n   )\r\n\r\n   return (\r\n      <div className={`${styles.root}`}>\r\n         <Switch>\r\n            <ProtectedRoute path={navBarLinks} exact>\r\n               <nav className={`${styles.nav} mr-5 pr-5`}>\r\n                  <NavLink\r\n                     exact\r\n                     to=\"/profile\"\r\n                     className={`${styles.link}`}\r\n                     activeClassName={styles.active}\r\n                  >\r\n                     <p className=\"text text_type_main-medium pt-4 pb-4\">\r\n                        Профиль\r\n                     </p>\r\n                  </NavLink>\r\n                  <NavLink\r\n                     to=\"/profile/orders\"\r\n                     className={`${styles.link}`}\r\n                     activeClassName={styles.active}\r\n                  >\r\n                     <p className=\"text text_type_main-medium pt-4 pb-4\">\r\n                        История заказов\r\n                     </p>\r\n                  </NavLink>\r\n                  <button\r\n                     className={`${styles.button}`}\r\n                     onClick={buttonLogout}\r\n                  >\r\n                     <p className=\"text text_type_main-medium pt-4 pb-5\">\r\n                        Выход\r\n                     </p>\r\n                  </button>\r\n                  <p className={`${styles.title} text text_type_main-smoll pt-5`}>\r\n                     <Switch>\r\n                        <Route path='/profile/orders' >В этом разделе вы можете просмотреть свою историю заказов</Route>\r\n                        <Route path='/profile' >В этом разделе вы можете изменить свои персональные данные</Route>\r\n                     </Switch>\r\n                  </p>\r\n               </nav>\r\n            </ProtectedRoute>\r\n         </Switch>\r\n         <Switch>\r\n            <ProtectedRoute path=\"/profile\" exact={true}>\r\n               <Profile />\r\n            </ProtectedRoute>\r\n            <ProtectedRoute path=\"/profile/orders\" >\r\n               <Switch location={location}>\r\n\r\n                  <Route path=\"/profile/orders\" exact={true} >\r\n                     <OrdersHistory />\r\n                  </Route>\r\n\r\n                  {isShowModal ? (\r\n                     <Route path={\"/profile/orders/:id\"} exact={true}>\r\n                        <OrdersHistory />\r\n                        <Modal\r\n                           title={currentNumber}\r\n                           onClose={onClickCloseButton}\r\n                        >\r\n                           <HistoryPage title={currentNumber} />\r\n                        </Modal>\r\n                     </Route>\r\n                  ) : (\r\n                     <Route path={\"/profile/orders/:id\"} exact={true}>\r\n                        <HistoryPage />\r\n                     </Route>\r\n                  )}\r\n               </Switch>\r\n            </ProtectedRoute>\r\n         </Switch>\r\n      </div>\r\n   )\r\n}","import { useMemo, FC } from 'react'\r\nimport { RouteProps } from 'react-router'\r\nimport { Redirect, Route, useHistory } from 'react-router-dom'\r\nimport { useSelector } from '../utils/hooks'\r\n\r\ntype RouteLocationState = {\r\n   from?: string;\r\n}\r\n\r\nexport const PublicRoute: FC<RouteProps> = ({ children, ...rest }) => {\r\n\r\n   const { isAuth } = useSelector(state => state.auth)\r\n   const history = useHistory<RouteLocationState>()\r\n   const state = useMemo(() => history?.location?.state, [history])\r\n\r\n   return (\r\n      <Route\r\n         {...rest}\r\n         render={() =>\r\n            isAuth\r\n               ? (<Redirect to={state?.from || '/'} />)\r\n               : (children)\r\n         }\r\n      />\r\n   )\r\n}\r\n","import logo from '../images/logo.svg'\nimport styles from './not-found-404.module.css'\n\nexport const NotFound404 = () => {\n  return (\n    <div className={styles.root}>\n      <p className=\"text text_type_digits-large text_color_inactive\">\n        NotF\n      </p>\n      <img className={styles.image} src={logo} alt=\"0\" />\n      <p className=\"text text_type_digits-large text_color_inactive\" >\n        und404\n      </p>\n    </div>\n  )\n}","import { FC, useMemo } from 'react'\r\nimport { useSelector } from '../../utils/hooks'\r\nimport { useParams } from 'react-router-dom'\r\nimport { TIngredient } from '../../types/data'\r\nimport styles from './ingredient-details.module.css'\r\n\r\ntype TIngredientDetailsProps = {\r\n   title?: string;\r\n}\r\n\r\nexport const IngredientDetails: FC<TIngredientDetailsProps> = ({ title }) => {\r\n\r\n   const { id } = useParams<{ id: string }>()\r\n   const { ingredients } = useSelector(state => state.ingredients)\r\n\r\n   const { image_large, name, calories, proteins, fat, carbohydrates } = useMemo(\r\n      () => ingredients?.find(ing => ing._id === id) || {} as TIngredient,\r\n      [ingredients, id]\r\n   )\r\n\r\n   return (\r\n      <section className={styles.root}>\r\n         {!!title && (\r\n            <header className={`${styles.header} p-3`}>\r\n               <p className=\"text text_type_main-large\">\r\n                  {title}\r\n               </p>\r\n            </header>\r\n         )}\r\n         <img src={image_large} alt={name} className={styles.image} />\r\n         <div className=\"pt-4\">\r\n            <p className=\"text text_type_main-medium pb-3\">\r\n               {name}\r\n            </p>\r\n            <div className={`${styles.info} pt-5 pb-5`}>\r\n               <div>\r\n                  <p className=\"text text_type_main-default \">\r\n                     Калории,ккал\r\n                  </p>\r\n                  <p className=\"text text_type_digits-default\">\r\n                     {calories}\r\n                  </p>\r\n               </div>\r\n               <div>\r\n                  <p className=\"text text_type_main-default\">\r\n                     Белки, г\r\n                  </p>\r\n                  <p className=\"text text_type_digits-default\">\r\n                     {proteins}\r\n                  </p>\r\n               </div>\r\n               <div>\r\n                  <p className=\"text text_type_main-default\">\r\n                     Жиры, г\r\n                  </p>\r\n                  <p className=\"text text_type_digits-default\">\r\n                     {fat}\r\n                  </p>\r\n               </div>\r\n               <div>\r\n                  <p className=\"text text_type_main-default\">\r\n                     Углеводы, г\r\n                  </p>\r\n                  <p className=\"text text_type_digits-default\">\r\n                     {carbohydrates}\r\n                  </p>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </section >\r\n   )\r\n}","import { useCallback, FC } from 'react'\r\nimport { useDrag } from 'react-dnd'\r\nimport { TYPES_DND } from '../../utils/constants'\r\nimport { Counter, CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { TIngredient } from '../../types/data'\r\nimport styles from './ingredient.module.css'\r\n\r\ntype TIngredientProps = {\r\n   ing: TIngredient,\r\n   onClick: (id: TIngredient[\"_id\"]) => void,\r\n   addIngredientMobile: (id: TIngredient[\"_id\"]) => void\r\n}\r\n\r\nexport const Ingredient: FC<TIngredientProps> = ({ ing, onClick, addIngredientMobile }) => {\r\n\r\n   const { _id, name, price, image, count } = ing\r\n\r\n   const [{ opacity }, dragRef] = useDrag({\r\n      type: TYPES_DND.ingredients,\r\n      item: ing,\r\n      collect: monitor => ({\r\n         opacity: monitor.isDragging() ? 0.5 : 1\r\n      })\r\n   })\r\n\r\n   const handlelClick = useCallback((e) => {\r\n      e.stopPropagation()\r\n      onClick(_id)\r\n   }, [onClick, _id])\r\n\r\n   const handlelClickAdd = useCallback((e) => {\r\n      e.stopPropagation()\r\n      addIngredientMobile(_id)\r\n   }, [addIngredientMobile, _id])\r\n\r\n   return (\r\n      <li\r\n         style={{ opacity }}\r\n         ref={dragRef}\r\n         className={`${styles.root}`}\r\n         onClick={handlelClick}\r\n      >\r\n         <img src={image} alt=\"img\" className={styles.image} />\r\n         <div className={`${styles.currency} p-2`}>\r\n            <div className='pr-2' >\r\n               {price}\r\n            </div>\r\n            <CurrencyIcon type=\"primary\" />\r\n         </div>\r\n         <div className='name p-5 pt-1'>\r\n            {name}\r\n         </div>\r\n         <Button type=\"secondary\" size=\"small\">\r\n            <p\r\n               className={`${styles.button_add} text text_type_main-small`}\r\n               onClick={handlelClickAdd}\r\n            >\r\n               Добавить\r\n            </p>\r\n         </Button>\r\n         {count && <Counter count={count} size=\"default\" />}\r\n      </li>\r\n   )\r\n}","import { useEffect, useState, FC } from \"react\"\r\nimport { TIngredient } from '../../types/data'\r\nimport { Ingredient } from '../ingredient/ingredient'\r\nimport styles from './ingredients-group.module.css'\r\n\r\ntype TIngredientsGroup = {\r\n   id: TIngredient[\"_id\"],\r\n   title: string,\r\n   ingredients: Array<TIngredient>,\r\n   observer: IntersectionObserver,\r\n   onClickIngredient: (_id: string) => void,\r\n   addIngredientMobile: (_id: string) => void,\r\n}\r\n\r\nexport const IngredientsGroup: FC<TIngredientsGroup> = ({\r\n   id, title, ingredients,\r\n   observer, onClickIngredient, addIngredientMobile\r\n}) => {\r\n\r\n   const [refElement, setRef] = useState<HTMLElement | null>(null)\r\n\r\n   useEffect(() => {\r\n      if (refElement && observer) {\r\n         observer.observe(refElement)\r\n      }\r\n\r\n      return () => {\r\n         if (refElement && observer) {\r\n            observer.unobserve(refElement)\r\n         }\r\n      }\r\n   }, [refElement, observer])\r\n\r\n   return (\r\n      <section ref={setRef} id={id}>\r\n         <h2>{title}</h2>\r\n         <ul className={styles.content} >\r\n            {ingredients?.map(ing =>\r\n               <Ingredient\r\n                  key={ing._id}\r\n                  ing={ing}\r\n                  onClick={onClickIngredient}\r\n                  addIngredientMobile={addIngredientMobile}\r\n               />\r\n            )}\r\n         </ul>\r\n      </section>\r\n\r\n   )\r\n}","import { useCallback, useEffect, useMemo, useRef, useState } from 'react'\r\nimport { useSelector } from '../../utils/hooks'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { INGREDIENTS_TYPES, INGREDIENTS_TYPES_NAME, SORTED_INGREDIENTS_TYPES } from '../../utils/constants'\r\nimport { Tab, Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { IngredientsGroup } from '../ingredients-group/ingredients-group'\r\nimport { Loading } from '../loading/loading'\r\nimport styles from './burger-ingredients.module.css'\r\n\r\n\r\nexport const BurgerIngredients = () => {\r\n\r\n   const history = useHistory()\r\n   const { ingredients, isLoading, error } = useSelector(state => state.ingredients)\r\n\r\n   const [currentTab, setCurrentTab] = useState(INGREDIENTS_TYPES.bun)\r\n\r\n   const filterIngredients = useCallback((type) =>\r\n      ingredients.filter((ing) => ing.type === type)\r\n      , [ingredients])\r\n\r\n   const groupedIngredients = useMemo(() => ({\r\n      [INGREDIENTS_TYPES.bun]: filterIngredients(INGREDIENTS_TYPES.bun),\r\n      [INGREDIENTS_TYPES.sauce]: filterIngredients(INGREDIENTS_TYPES.sauce),\r\n      [INGREDIENTS_TYPES.main]: filterIngredients(INGREDIENTS_TYPES.main)\r\n   }), [filterIngredients])\r\n\r\n   const openIngredientModal = useCallback((_id) => {\r\n      history.push({\r\n         pathname: `/ingredients/${_id}`\r\n      })\r\n   }, [history])\r\n\r\n   const addIngredient = useCallback((_id) => {\r\n      console.log(\"id\", _id)\r\n   }, [])\r\n\r\n   const scrollToTab = useCallback((currentTab) => {\r\n      const tab = document.getElementById(currentTab)\r\n      if (tab) tab.scrollIntoView({ behavior: \"smooth\" })\r\n   }, [])\r\n\r\n   const ref = useRef(null)\r\n   const refElement = ref.current\r\n\r\n   const observer = useMemo(() => {\r\n      return new IntersectionObserver(\r\n         ([entry]) => {\r\n            if (!entry.isIntersecting) {\r\n               const nextSibling = entry?.target?.nextSibling as HTMLDivElement\r\n               const nextTab = nextSibling?.id\r\n               if (nextTab) {\r\n                  setCurrentTab(nextTab)\r\n               }\r\n            } else {\r\n               setCurrentTab(entry.target.id)\r\n            }\r\n         },\r\n         { root: refElement, threshold: .5 }\r\n      )\r\n   }, [refElement])\r\n\r\n   useEffect(() => {\r\n      return () => {\r\n         observer.disconnect()\r\n      }\r\n   }, [observer])\r\n\r\n   return (\r\n      <main className={`${styles.root} mr-5`}>\r\n         <nav className={styles.navbar} >\r\n            {SORTED_INGREDIENTS_TYPES.map((type) => (\r\n               <Tab\r\n                  // @ts-ignore\r\n                  id={type}\r\n                  key={type}\r\n                  value={type}\r\n                  active={currentTab === type}\r\n                  onClick={scrollToTab}\r\n               >\r\n                  {INGREDIENTS_TYPES_NAME[type]}\r\n               </Tab>\r\n            ))}\r\n         </nav>\r\n         {error ? (\r\n            `Ошибка: ${error.message}`\r\n         ) : (\r\n            <div className={styles.container} >\r\n               <div ref={ref} className={`${styles.wrapper_section} mt-5`}>\r\n                  {isLoading ? (\r\n                     <Loading />\r\n                  ) : (SORTED_INGREDIENTS_TYPES.map((type) => (\r\n                     <IngredientsGroup\r\n                        key={type}\r\n                        id={type}\r\n                        title={INGREDIENTS_TYPES_NAME[type]}\r\n                        ingredients={groupedIngredients[type]}\r\n                        observer={observer}\r\n                        onClickIngredient={openIngredientModal}\r\n                        addIngredientMobile={addIngredient}\r\n                     />\r\n                  )))}\r\n               </div>\r\n            </div>\r\n         )}\r\n         <footer className={`${styles.footer} pt-4 pb-4 pr-1`}>\r\n            <p className=\"text text_type_digits-default mr-2\">\r\n               420\r\n            </p>\r\n            <CurrencyIcon type=\"primary\" />\r\n            <Button\r\n               type=\"primary\"\r\n               size=\"small\"\r\n            >\r\n               Смотреть заказ\r\n            </Button>\r\n         </footer>\r\n      </main >\r\n   )\r\n}","import { FC } from 'react'\r\nimport { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport styles from './order-details.module.css'\r\n\r\ntype TOrderDetails = {\r\n   orderNumber: number,\r\n   info: string,\r\n   text: string\r\n}\r\n\r\nexport const OrderDetails: FC<TOrderDetails> = ({ orderNumber, info, text }) => {\r\n   return (\r\n      <section className={styles.root} >\r\n         <p className=\"text text_type_digits-large pb-5 pt-5\">\r\n            {orderNumber}\r\n         </p>\r\n         <p className=\"text text_type_main-medium pt-3 pb-5\">\r\n            идентификатор заказа\r\n         </p>\r\n         <div className={styles.checkMarkIcon} >\r\n            < CheckMarkIcon type=\"secondary\" />\r\n         </div>\r\n         <p className=\"text text_type_main-default pt-5 pb-2\">\r\n            {info}\r\n         </p>\r\n         <p className={`${styles.button_block} text text_type_main-default`}>\r\n            {text}\r\n         </p>\r\n      </section >\r\n   )\r\n}","import { FC } from 'react'\r\nimport { useDrag, useDrop } from 'react-dnd'\r\nimport { TYPES_DND } from '../../utils/constants'\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { TIngredient } from '../../types/data'\r\nimport styles from './ingredient-constructor.module.css'\r\n\r\ntype TIng = {\r\n   id: TIngredient[\"_id\"],\r\n   idx: number,\r\n   price: TIngredient[\"price\"]\r\n}\r\ntype TIngredientConstructor = {\r\n   ing: TIngredient,\r\n   idx: number,\r\n   removeIngredient: (ing: TIng) => void,\r\n   moveIngredient: (item: number, idx: number) => void\r\n}\r\n\r\nexport const IngredientConstructor: FC<TIngredientConstructor> = ({ ing, idx, removeIngredient, moveIngredient }) => {\r\n\r\n   const [, dragRef] = useDrag({\r\n      type: TYPES_DND.items,\r\n      item: { idx },\r\n      end: (item, monitor) => {\r\n         const didDrop = monitor.didDrop()\r\n         if (!didDrop) {\r\n            moveIngredient(item.idx, idx)\r\n         }\r\n      },\r\n   }, [idx, moveIngredient])\r\n\r\n   const [, dropRef] = useDrop({\r\n      accept: TYPES_DND.items,\r\n      canDrop: () => false,\r\n      hover: (item: TIng) => {\r\n         const dragIndex = item.idx\r\n         const hoverIndex = idx\r\n         if (dragIndex === hoverIndex) {\r\n            return\r\n         }\r\n         item.idx = hoverIndex\r\n         moveIngredient(dragIndex, hoverIndex)\r\n      }\r\n   }, [idx, moveIngredient])\r\n\r\n   return (\r\n      <li\r\n         className={`${styles.element} mb-2 mt-2`}\r\n         ref={node => dragRef(dropRef(node))}\r\n      >\r\n         <div className=\" mr-2\" >\r\n            <DragIcon type=\"primary\" />\r\n         </div>\r\n         <ConstructorElement\r\n            text={ing.name}\r\n            price={ing.price}\r\n            thumbnail={ing.image}\r\n            handleClose={() => removeIngredient({\r\n               id: ing._id,\r\n               idx: idx,\r\n               price: ing.price\r\n            })}\r\n         />\r\n      </li>\r\n   )\r\n}","import { FC } from 'react'\r\nimport { Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport styles from './footer-constructor.module.css'\r\n\r\ntype TFooterConstructor = {\r\n   sum: number,\r\n   title: string,\r\n   handleClick: () => void\r\n}\r\nexport const FooterConstructor: FC<TFooterConstructor> = ({ sum, handleClick, title }) => {\r\n\r\n   return (\r\n      <section className={`${styles.section} pr-1`}>\r\n         <p className=\"text text_type_digits-medium\">\r\n            {sum}\r\n         </p>\r\n         <div className=\"m-5\">\r\n            <CurrencyIcon type=\"primary\" />\r\n         </div>\r\n         <div className=\"m-5 mr-1\">\r\n            <Button\r\n               type=\"primary\"\r\n               onClick={handleClick}\r\n            >\r\n               {title}\r\n            </Button>\r\n         </div>\r\n      </section>\r\n   )\r\n}","import { useCallback, useMemo, FC } from 'react'\r\nimport { useDispatch, useSelector } from '../../utils/hooks'\r\nimport { useDrop } from 'react-dnd'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { ORDER_DETAILS, TYPES_DND } from '../../utils/constants'\r\nimport { removeConstructorIngredient, clearConstructor, setSelectedIngredient, sortIngredients } from '../../services/actions/burger-constructor'\r\nimport { clearCounts, decreaseCount, increaseCount } from '../../services/actions/burger-ingredients'\r\nimport { createOrder, removeOrder } from '../../services/actions/burger-constructor'\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { OrderDetails } from '../order-details/order-details'\r\nimport { Modal } from '../modal/modal'\r\nimport { IngredientConstructor } from '../ingredient-constructor/ingredient-constructor'\r\nimport { FooterConstructor } from '../footer-constructor/footer-constructor'\r\nimport { Loading } from '../loading/loading'\r\nimport styles from './burger-constructor.module.css'\r\n\r\n\r\nexport const BurgerConstructor: FC = () => {\r\n\r\n   const history = useHistory()\r\n   const dispatch = useDispatch()\r\n   const { selectedBun, selectedIngredients, bunsSum,\r\n      ingredientsSum\r\n   } = useSelector(state => state.selectedIngredients)\r\n   const { isAuth } = useSelector(state => state.auth)\r\n   const { orderNumber, error, isLoading } = useSelector(state => state.selectedIngredients)\r\n\r\n   const selectedIds = useMemo(() => {\r\n      const result = selectedIngredients?.map(ing => ing._id)\r\n      return selectedBun\r\n         ? [...result, selectedBun._id]\r\n         : result\r\n   }, [selectedIngredients, selectedBun])\r\n\r\n   const setIngredient = useCallback((ing) => {\r\n      dispatch(setSelectedIngredient(ing))\r\n      dispatch(increaseCount({ id: ing._id, type: ing.type }))\r\n   }, [dispatch])\r\n\r\n   const removeIngredient = useCallback(({ id, idx, price }) => {\r\n      dispatch(removeConstructorIngredient({ idx, price }))\r\n      dispatch(decreaseCount(id))\r\n   }, [dispatch])\r\n\r\n   const moveIngredient = useCallback((dragIndex, hoverIndex) => {\r\n      dispatch(sortIngredients({ dragIndex, hoverIndex }))\r\n   }, [dispatch])\r\n\r\n   const closeConstructorModal = useCallback(() => {\r\n      dispatch(removeOrder())\r\n      dispatch(clearConstructor())\r\n      dispatch(clearCounts())\r\n   }, [dispatch])\r\n\r\n   const handleClick = useCallback(() => {\r\n      if (!isAuth) {\r\n         history.push(\"/login\")\r\n      } else if (selectedBun) {\r\n         dispatch(createOrder(selectedIds))\r\n      }\r\n   }, [dispatch, selectedBun, selectedIds, isAuth, history])\r\n\r\n   const [{ isHover }, dropRef] = useDrop({\r\n      accept: TYPES_DND.ingredients,\r\n      drop(ing) {\r\n         setIngredient(ing)\r\n      },\r\n      collect: monitor => ({\r\n         isHover: monitor.isOver(),\r\n      }),\r\n   })\r\n   const [, drop] = useDrop(() => ({ accept: TYPES_DND.items }))\r\n   return (\r\n      <main\r\n         ref={dropRef}\r\n         className={`${isHover ? styles.active : styles.root} ml-5 pl-4`}\r\n      >\r\n         {!!error\r\n            ? `Ошибка: ${error.message}`\r\n            : (isLoading\r\n               ? <Loading />\r\n               : (orderNumber && (\r\n                  <Modal onClose={closeConstructorModal}>\r\n                     <OrderDetails\r\n                        orderNumber={orderNumber}\r\n                        info={ORDER_DETAILS.info}\r\n                        text={ORDER_DETAILS.text}\r\n                     />\r\n                  </Modal>\r\n               ))\r\n            )}\r\n         {!!selectedBun && (\r\n            <div className={styles.locked_block} >\r\n               <ConstructorElement\r\n                  type=\"top\"\r\n                  isLocked={true}\r\n                  text={`${selectedBun.name} (верх)`}\r\n                  price={selectedBun.price}\r\n                  thumbnail={selectedBun.image}\r\n               />\r\n            </div>\r\n         )}\r\n         <div className={styles.container} >\r\n            <ul ref={drop} className={`${styles.wrapper_elements} mt-3 mb-3`}>\r\n               {selectedIngredients && selectedIngredients.map((ing, idx) =>\r\n                  <IngredientConstructor\r\n                     key={`${ing._id}-${idx}`}\r\n                     ing={ing}\r\n                     idx={idx}\r\n                     removeIngredient={removeIngredient}\r\n                     moveIngredient={moveIngredient}\r\n                  />\r\n               )}\r\n            </ul>\r\n         </div>\r\n         {!!selectedBun && (\r\n            <div className={`${styles.locked_block}`}>\r\n               <ConstructorElement\r\n                  type=\"bottom\"\r\n                  isLocked={true}\r\n                  text={`${selectedBun.name} (низ)`}\r\n                  price={selectedBun.price}\r\n                  thumbnail={selectedBun.image}\r\n               />\r\n            </div>\r\n         )}\r\n         <FooterConstructor\r\n            handleClick={handleClick}\r\n            sum={Number(`${ingredientsSum + bunsSum}`)}\r\n            title=\"Оформить заказ\"\r\n         />\r\n      </main>\r\n   )\r\n}","import { DndProvider } from \"react-dnd\"\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\"\r\nimport { BurgerIngredients } from '../components/burger-ingredients/burger-ingredients'\r\nimport { BurgerConstructor } from '../components/burger-constructor/burger-constructor'\r\nimport styles from './constructor.module.css'\r\n\r\nexport const Constructor = () => {\r\n  return (\r\n    <div className={`${styles.root} pl-1 pr-1 pt-5`}>\r\n      <p className={`${styles.header} text text_type_main-large pt-5 pb-5`}>\r\n        Соберите бургер\r\n      </p>\r\n      <div className={styles.wrapper}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <BurgerIngredients />\r\n          <BurgerConstructor />\r\n        </DndProvider >\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useCallback } from 'react'\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom'\r\nimport { IngredientDetails } from '../components/ingredient-details/ingredient-details'\r\nimport { Constructor } from '../pages/constructor'\r\nimport { Modal } from '../components/modal/modal'\r\n\r\n\r\nexport const ConstructorLayout = () => {\r\n\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const isShowModal = history.action === 'PUSH'\r\n\r\n  const onClickCloseButton = useCallback(() => {\r\n    history.go(-1)\r\n  }, [history])\r\n\r\n  return (\r\n    <Switch location={location}>\r\n      <Route path=\"/\" exact={true}>\r\n        <Constructor />\r\n      </Route>\r\n\r\n      <Route path=\"/ingredients/:id\" exact={true}>\r\n        {isShowModal ?\r\n          (\r\n            <>\r\n              <Constructor />\r\n              <Modal\r\n                title=\"Детали ингредиента\"\r\n                onClose={onClickCloseButton}\r\n              >\r\n                <IngredientDetails />\r\n              </Modal>\r\n            </>\r\n          ) : (\r\n            <IngredientDetails title=\"Детали ингредиента\" />\r\n          )\r\n        }\r\n\r\n      </Route>\r\n    </Switch>\r\n  )\r\n}","import { useCallback, useMemo } from 'react'\r\nimport { useSelector, useDispatch } from '../utils/hooks'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { STATUS_TYPES } from '../utils/constants'\r\nimport { Loading } from '../components/loading/loading'\r\nimport { OrderCard } from '../components/order-card/order-card'\r\nimport { setCurrentNumber } from '../services/actions/feed'\r\nimport styles from './orders-feed.module.css'\r\n\r\nexport const OrdersFeed = () => {\r\n\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const { isLoading, totalToday, total, orders, error } = useSelector(state => state.feed)\r\n\r\n  const readyOrders = useMemo(() =>\r\n    orders?.filter(order => order.status === STATUS_TYPES.done)\r\n    , [orders])\r\n\r\n  const prepareOrders = useMemo(() =>\r\n    orders?.filter(order => order.status !== STATUS_TYPES.done)\r\n    , [orders])\r\n\r\n  const handlelClick = useCallback((id, number) => {\r\n    dispatch(setCurrentNumber(number))\r\n    history.push(`/feed/${id}`)\r\n  }, [history, dispatch])\r\n\r\n  return (\r\n    <div className={`${styles.root} pt-5`}>\r\n      {isLoading && <Loading />}\r\n      <p className=\"text text_type_main-large pl-1 pt-5\">\r\n        Лента заказов\r\n      </p>\r\n      <div className={styles.wrapper}>\r\n        <ul className={`${styles.cards} p-1`}>\r\n          {error && <p className={`${styles.error} text text_type_main-medium`} >\r\n            {error.message}\r\n          </p>}\r\n          {orders?.map(order =>\r\n            <OrderCard\r\n              key={order._id}\r\n              order={order}\r\n              onClick={handlelClick}\r\n            />\r\n          )}\r\n        </ul>\r\n        <div className={styles.statistic}>\r\n          <div className={`${styles.top_block} pb-5`}>\r\n            <div className={styles.status}>\r\n              <p className=\"text text_type_main-medium pb-2\">\r\n                Готовы:\r\n              </p>\r\n              <div className={styles.block_ready}>\r\n                <ul className={styles.numbers_status}>\r\n                  {readyOrders?.map((order, i) =>\r\n                    (i < 10) && (\r\n                      <li\r\n                        key={`${order.number}-${i}`}\r\n                        className={`${styles.number_ready} pt-1 pb-1`}\r\n                      >\r\n                        <p className=\"text text_type_digits-default \">\r\n                          {order.number}\r\n                        </p>\r\n                      </li>\r\n                    )\r\n                  )}\r\n                </ul>\r\n                <ul className={styles.numbers_status}>\r\n                  {readyOrders?.map((order, i) =>\r\n                    (i >= 10 && i < 20) && (\r\n                      <li\r\n                        key={`${order.number}-${i}`}\r\n                        className={`${styles.number_ready} pt-1 pb-1`}\r\n                      >\r\n                        <p className=\"text text_type_digits-default \">\r\n                          {order.number}\r\n                        </p>\r\n                      </li>\r\n                    )\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div className={styles.status}>\r\n              <p className=\"text text_type_main-medium pb-2\">\r\n                В работе:\r\n              </p>\r\n              <div className={styles.block_ready}>\r\n                <ul className={styles.numbers_status}>\r\n                  {prepareOrders?.map((order, i) =>\r\n                    (i < 10) && (\r\n                      <li\r\n                        key={`${order.number}-${i}`}\r\n                        className={`${styles.number} pt-1 pb-1`}\r\n                      >\r\n                        <p className=\"text text_type_digits-default \">\r\n                          {order.number}\r\n                        </p>\r\n                      </li>\r\n                    )\r\n                  )}\r\n                </ul>\r\n                <ul className={styles.numbers_status}>\r\n                  {prepareOrders?.map((order, i) =>\r\n                    (i >= 10 && i < 20) && (\r\n                      <li\r\n                        key={`${order.number}-${i}`}\r\n                        className={`${styles.number} pt-1 pb-1`}\r\n                      >\r\n                        <p className=\"text text_type_digits-default \">\r\n                          {order.number}\r\n                        </p>\r\n                      </li>\r\n                    )\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p className=\"text text_type_main-medium mt-5\">\r\n            Выполнено за все время:\r\n          </p>\r\n          <p className=\"text text_type_digits-large\">\r\n            {total}\r\n          </p>\r\n          <p className=\"text text_type_main-medium mt-5\">\r\n            Выполнено за сегодня:\r\n          </p>\r\n          <p className=\"text text_type_digits-large\">\r\n            {totalToday}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { FC } from 'react'\r\nimport { useSelector } from '../utils/hooks'\r\nimport { useParams } from 'react-router-dom'\r\nimport { OrderPage } from '../components/order-page/order-page'\r\nimport { Loading } from '../components/loading/loading'\r\n\r\ntype TFeedPage = {\r\n  title: string;\r\n}\r\n\r\nexport const FeedPage: FC<TFeedPage> = ({ title }) => {\r\n\r\n  const { id } = useParams<{ id: string }>()\r\n\r\n  const { ingredients: ingredientsAll } = useSelector(state => state.ingredients)\r\n  const { orders, isLoading } = useSelector(state => state.feed)\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <Loading />}\r\n      <OrderPage\r\n        id={id}\r\n        title={title}\r\n        ingredientsAll={ingredientsAll}\r\n        orders={orders}\r\n      />\r\n    </>\r\n  )\r\n}","import { useCallback } from 'react'\r\nimport { useSelector } from '../utils/hooks'\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom'\r\nimport { OrdersFeed } from '../pages/orders-feed'\r\nimport { Modal } from '../components/modal/modal'\r\nimport { FeedPage } from '../pages/feed-page'\r\n\r\n\r\nexport const FeedLayout = () => {\r\n\r\n  const { currentNumber } = useSelector(state => state.feed)\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const isShowModal = history.action === 'PUSH'\r\n\r\n  const onClickCloseButton = useCallback(() => {\r\n    history.go(-1)\r\n  }, [history])\r\n\r\n  return (\r\n    <Switch location={location}>\r\n      <Route path=\"/feed\" exact={true}>\r\n        <OrdersFeed />\r\n      </Route>\r\n\r\n      <Route path=\"/feed/:id\" exact={true}>\r\n        {isShowModal ?\r\n          (\r\n            <>\r\n              <OrdersFeed />\r\n              <Modal\r\n                title={currentNumber}\r\n                onClose={onClickCloseButton}\r\n              >\r\n                <FeedPage title={currentNumber} />\r\n              </Modal>\r\n            </>\r\n          ) : (\r\n            <FeedPage />\r\n          )\r\n        }\r\n\r\n      </Route>\r\n    </Switch>\r\n  )\r\n}","import { useEffect } from 'react'\nimport { useDispatch } from '../../utils/hooks'\nimport { getIngredients } from '../../services/actions/burger-ingredients'\nimport { Route, Switch } from 'react-router-dom'\nimport { AppHeader } from '../app-header/app-header'\nimport { Login } from '../../pages/login'\nimport { Register } from '../../pages/register'\nimport { RestorePassword } from '../../pages/restore-password'\nimport { SaveNewPassword } from '../../pages/save-new-password'\nimport { ProfileLayout } from '../../layouts/profile-layout'\nimport { ProtectedRoute } from '../protected-route'\nimport { PublicRoute } from '../public-route'\nimport { NotFound404 } from '../../pages/not-found-404'\nimport { ConstructorLayout } from '../../layouts/constructor-layout'\nimport { FeedLayout } from '../../layouts/feed-layout'\nimport { wsFeedStart } from '../../services/actions/feed'\n\nexport const App = () => {\n\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getIngredients())\n  }, [dispatch])\n\n  useEffect(() => {\n    dispatch(wsFeedStart())\n  }, [dispatch])\n\n  return (\n    <>\n      <AppHeader />\n      <Switch>\n        <Route path={[\"/\", \"/ingredients/:id\"]} exact={true}>\n          <ConstructorLayout />\n        </Route>\n\n        <PublicRoute path=\"/login\" exact={true}>\n          <Login />\n        </PublicRoute>\n\n        <PublicRoute path=\"/register\" exact={true}>\n          <Register />\n        </PublicRoute>\n\n        <PublicRoute path=\"/forgot-password\" exact={true}>\n          <RestorePassword />\n        </PublicRoute>\n\n        <PublicRoute path=\"/reset-password\" exact={true}>\n          <SaveNewPassword />\n        </PublicRoute>\n\n        <Route path=\"/feed\">\n          <FeedLayout />\n        </Route>\n\n        <ProtectedRoute path=\"/profile\">\n          <ProfileLayout />\n        </ProtectedRoute>\n\n        <Route>\n          <NotFound404 />\n        </Route>\n      </Switch>\n    </>\n  )\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter, HashRouter } from 'react-router-dom'\nimport { store } from './services/store'\nimport './index.css'\nimport { App } from './components/app/app'\nimport reportWebVitals from './reportWebVitals'\n\nconst isProduction = process.env.NODE_ENV === 'production';\nconst Router: typeof HashRouter = isProduction ? HashRouter : BrowserRouter\n// eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwZTI0Mzc0MmRhZDYzMDAxYTQwYTZkNiIsImlhdCI6MTYyODAzMzA4OSwiZXhwIjoxNjI4MDM0Mjg5fQ.l8o3nNgU0MlCF_i7HL9Ov6Ba6_frWoAHGLdTrLIExBc\n// 551cc1a644daa0f46bb3ffc3eac23f0219976ba5f6215728dc032ef64946a4a08dac9f3c87236c30\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"app-header_root__3cr8N\",\"header\":\"app-header_header__1aD3e\",\"logo\":\"app-header_logo__2aCVd\",\"link\":\"app-header_link__2hePz\",\"active\":\"app-header_active__1v-3u\",\"leftBlock\":\"app-header_leftBlock__1rzJe\",\"mobile_header\":\"app-header_mobile_header__1gjY1\",\"text\":\"app-header_text__35HN4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list_items\":\"order-page_list_items__3q3R3\",\"root\":\"order-page_root__3yhCm\",\"header\":\"order-page_header__bXOJc\",\"status\":\"order-page_status__i0RuZ\",\"title\":\"order-page_title__21eaZ\",\"item\":\"order-page_item__3ySs5\",\"section\":\"order-page_section__1DDMQ\",\"bottom_block\":\"order-page_bottom_block__3-PPg\",\"price\":\"order-page_price__19LeP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"profile-layout_root__2abRD\",\"nav\":\"profile-layout_nav__EboZ2\",\"button\":\"profile-layout_button__2B7Hq\",\"title\":\"profile-layout_title__2giHe\",\"link\":\"profile-layout_link___eHBz\",\"active\":\"profile-layout_active__3OIp1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"profile_form__1dQ1x\",\"field\":\"profile_field__liQcV\",\"buttonBlock\":\"profile_buttonBlock__ykRX0\",\"error\":\"profile_error__2VJq3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper_elements\":\"burger-constructor_wrapper_elements__1ECco\",\"root\":\"burger-constructor_root__3YMb6\",\"active\":\"burger-constructor_active__3FO41\",\"locked_block\":\"burger-constructor_locked_block__2WSb7\",\"container\":\"burger-constructor_container__23iLt\",\"section\":\"burger-constructor_section__2Lemp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-card_card__2JPvR\",\"info\":\"order-card_info__2ABQM\",\"bottom_block\":\"order-card_bottom_block__1kwIO\",\"section\":\"order-card_section__3lCND\",\"price\":\"order-card_price__2RePj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper_section\":\"burger-ingredients_wrapper_section__2w96O\",\"root\":\"burger-ingredients_root__2AquV\",\"navbar\":\"burger-ingredients_navbar__1q8ZB\",\"container\":\"burger-ingredients_container__5y42s\",\"footer\":\"burger-ingredients_footer__3IJYm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ingredient-details_root__xLxCf\",\"header\":\"ingredient-details_header__1GAln\",\"image\":\"ingredient-details_image__3E5t0\",\"info\":\"ingredient-details_info__U4hIC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ingredient_root__2u5PS\",\"currency\":\"ingredient_currency__fKj8D\",\"image\":\"ingredient_image__ONvnn\",\"button_add\":\"ingredient_button_add__lqLKO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"loading_root__1PthG\",\"image_wrapper\":\"loading_image_wrapper__3WHC3\",\"preloader-rotate\":\"loading_preloader-rotate__1kvuD\",\"image\":\"loading_image__2UuPR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"modal_root__2SrXU\",\"header\":\"modal_header__1jzqT\",\"closeButton\":\"modal_closeButton__3TZG8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card_wrapper\":\"ingredient-card_card_wrapper__lxUa5\",\"image\":\"ingredient-card_image__1q6ON\",\"count\":\"ingredient-card_count__b0OLG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"order-details_root__1tuR4\",\"checkMarkIcon\":\"order-details_checkMarkIcon__36h5C\",\"button_block\":\"order-details_button_block__1tXxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"constructor_root__3CcTL\",\"wrapper\":\"constructor_wrapper__1CMDv\",\"wrapper_section\":\"constructor_wrapper_section__6BuPK\",\"header\":\"constructor_header__2SeN6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"login_root__2-tVn\",\"form\":\"login_form__3EWJf\",\"field\":\"login_field__1x87Y\",\"text\":\"login_text__Yuhvv\",\"link\":\"login_link__CK59F\",\"error\":\"login_error__120W4\",\"title\":\"login_title__5Hw_Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"orders-history_cards__3EoUr\",\"wrapper\":\"orders-history_wrapper__3WdH7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"not-found-404_root__2OXkb\",\"image\":\"not-found-404_image__3UL0o\"};"],"sourceRoot":""}